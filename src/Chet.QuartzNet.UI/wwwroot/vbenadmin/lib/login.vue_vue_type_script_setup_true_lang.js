import{bt as e,bA as t,be as o,at as a,bB as s,bC as n,b3 as l,bD as i,Z as r,bE as u,bz as c,bF as d,bG as p,bs as f,b4 as m,bg as g,bH as y,bI as h,b6 as b,bJ as v,bK as _,bL as x,bM as w,bN as k,b5 as C,bO as B,br as P,bP as L}from"./bootstrap.js";import{a3 as $,aj as A,ak as T,al as D,am as S,aw as I,ax as M,ab as q,L as R,ah as E,V as j,ac as O,aq as z,E as F,p as V,ao as W,an as U,aT as N,bs as K,aS as Q,ay as X,az as G,aY as Z,aZ as H,P as J,U as Y,a8 as ee,bD as te,b3 as oe,f as ae,aA as se,as as ne,a2 as le,bE as ie,M as re}from"../app.js";import{T as ue}from"./auth-title.js";import{S as ce,a as de,b as pe,c as fe,d as me}from"./index32.js";import{C as ge,a as ye,u as he,s as be,b as ve}from"./use-vben-form.js";import{D as _e,a as xe,b as we,c as ke,d as Ce,C as Be,X as Pe,u as Le}from"./use-modal.js";import{_ as $e}from"./render-content.vue_vue_type_script_lang.js";var Ae=$({__name:"AlertDialogAction",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const o=t;return e(),(e,t)=>(T(),A(q(_e),I(M(o)),{default:D(()=>[S(e.$slots,"default")]),_:3},16))}});const[Te,De]=o("AlertDialogContent");var Se=$({__name:"AlertDialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:s}){const n=o,l=t(s);e();const i=R();return De({onCancelElementChange:e=>{i.value=e}}),(e,t)=>(T(),A(q(xe),E({...n,...q(l)},{role:"alertdialog",onPointerDownOutside:t[0]||(t[0]=a(()=>{},["prevent"])),onInteractOutside:t[1]||(t[1]=a(()=>{},["prevent"])),onOpenAutoFocus:t[2]||(t[2]=()=>{j(()=>{i.value?.focus({preventScroll:!0})})})}),{default:D(()=>[S(e.$slots,"default")]),_:3},16))}}),Ie=$({__name:"AlertDialogCancel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const o=t,a=Te(),{forwardRef:s,currentElement:n}=e();return O(()=>{a.onCancelElementChange(n.value)}),(e,t)=>(T(),A(q(_e),E(o,{ref:q(s)}),{default:D(()=>[S(e.$slots,"default")]),_:3},16))}}),Me=$({__name:"AlertDialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"p"}},setup(t){const o=t;return e(),(e,t)=>(T(),A(q(we),I(M(o)),{default:D(()=>[S(e.$slots,"default")]),_:3},16))}}),qe=$({__name:"AlertDialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(e){const t=e;return(e,o)=>(T(),A(q(s),I(M(t)),{default:D(()=>[S(e.$slots,"default")]),_:3},16))}}),Re=$({__name:"AlertDialogRoot",props:{open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1}},emits:["update:open"],setup(t,{emit:o}){const a=n(t,o);return e(),(e,t)=>(T(),A(q(ke),E(q(a),{modal:!0}),{default:D(t=>[S(e.$slots,"default",I(M(t)))]),_:3},16))}}),Ee=$({__name:"AlertDialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(t){const o=t;return e(),(e,t)=>(T(),A(q(Ce),I(M(o)),{default:D(()=>[S(e.$slots,"default")]),_:3},16))}});const je=l("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Oe=$({__name:"AlertDialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean}},emits:["update:open"],setup(e,{emit:t}){const o=n(e,t);return(e,t)=>(T(),A(q(Re),I(M(q(o))),{default:D(()=>[S(e.$slots,"default")]),_:3},16))}}),ze=$({__name:"AlertDialogAction",props:{asChild:{type:Boolean},as:{}},setup(e){const t=e;return(e,o)=>(T(),A(q(Ae),I(M(t)),{default:D(()=>[S(e.$slots,"default")]),_:3},16))}}),Fe=$({__name:"AlertDialogCancel",props:{asChild:{type:Boolean},as:{}},setup(e){const t=e;return(e,o)=>(T(),A(q(Ie),I(M(t)),{default:D(()=>[S(e.$slots,"default")]),_:3},16))}}),Ve={class:"z-popup inset-0 bg-overlay"},We=$({__name:"AlertDialogOverlay",setup:e=>(i(),(e,t)=>(T(),z("div",Ve)))}),Ue=$({__name:"AlertDialogContent",props:{forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},centered:{type:Boolean},class:{},modal:{type:Boolean,default:!0},open:{type:Boolean},overlayBlur:{},zIndex:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus","close","closed","opened"],setup(e,{expose:t,emit:o}){const a=e,s=o,l=F(()=>{const{class:e,modal:t,open:o,...s}=a;return s}),i=n(l,s),u=R(null);function c(e){e.target===u.value?.$el&&(a.open?s("opened"):s("closed"))}return t({getContentRef:()=>u.value}),(t,o)=>(T(),A(q(qe),null,{default:D(()=>[V(r,{name:"fade",appear:""},{default:D(()=>[e.open&&e.modal?(T(),A(We,{key:0,style:U({...e.zIndex?{zIndex:e.zIndex}:{},position:"fixed",backdropFilter:e.overlayBlur&&e.overlayBlur>0?`blur(${e.overlayBlur}px)`:"none"}),onClick:o[0]||(o[0]=()=>s("close"))},null,8,["style"])):W("",!0)]),_:1}),V(q(Se),E({ref_key:"contentRef",ref:u,style:{...e.zIndex?{zIndex:e.zIndex}:{},position:"fixed"},onAnimationend:c},q(i),{class:q(N)("z-popup bg-background p-6 shadow-lg outline-none sm:rounded-xl","data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95","data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95",{"data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-top-[48%]":!e.centered,"data-[state=closed]:slide-out-to-top-[148%] data-[state=open]:slide-in-from-top-[98%]":e.centered,"top-[10vh]":!e.centered,"top-1/2 -translate-y-1/2":e.centered},a.class)}),{default:D(()=>[S(t.$slots,"default")]),_:3},16,["style","class"])]),_:3}))}}),Ne=$({__name:"AlertDialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const t=e,o=F(()=>{const{class:e,...o}=t;return o}),a=u(o);return(e,o)=>(T(),A(q(Me),E(q(a),{class:q(N)("text-sm text-muted-foreground",t.class)}),{default:D(()=>[S(e.$slots,"default")]),_:3},16,["class"]))}}),Ke=$({__name:"AlertDialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const t=e,o=F(()=>{const{class:e,...o}=t;return o}),a=u(o);return(e,o)=>(T(),A(q(Ee),E(q(a),{class:q(N)("text-lg font-semibold leading-none tracking-tight",t.class)}),{default:D(()=>[S(e.$slots,"default")]),_:3},16,["class"]))}}),Qe=$({__name:"spine-text",props:{animationDuration:{default:2},animationIterationCount:{default:"infinite"}},setup(e){const t=F(()=>({animation:`shine ${e.animationDuration}s linear ${e.animationIterationCount}`}));return(e,o)=>(T(),z("div",{style:U(t.value),class:"vben-spine-text !bg-clip-text text-transparent"},[S(e.$slots,"default")],4))}}),Xe=$({__name:"slider-captcha-action",props:{actionStyle:{},isPassing:{type:Boolean},toLeft:{type:Boolean}},setup(e,{expose:t}){const o=e,a=K("actionRef"),s=R("0"),n=F(()=>{const{actionStyle:e}=o;return{...e,left:s.value}}),l=F(()=>Number.parseInt(s.value)>10&&!o.isPassing);return t({getEl:()=>a.value,getStyle:()=>a?.value?.style,setLeft:e=>{s.value=e}}),(t,o)=>(T(),z("div",{ref_key:"actionRef",ref:a,class:Q([{"transition-width !left-0 duration-300":e.toLeft,"rounded-md":l.value},"bg-background dark:bg-accent absolute left-0 top-0 flex h-full cursor-move items-center justify-center px-3.5 shadow-md"]),style:U(n.value),name:"captcha-action"},[V(q(c),{"is-passing":e.isPassing,class:"text-foreground/60 size-4"},{default:D(()=>[S(t.$slots,"icon",{},()=>[e.isPassing?(T(),A(q(p),{key:1})):(T(),A(q(d),{key:0}))])]),_:3},8,["is-passing"])],6))}}),Ge=$({__name:"slider-captcha-bar",props:{barStyle:{},toLeft:{type:Boolean}},setup(e,{expose:t}){const o=e,a=K("barRef"),s=R("0"),n=F(()=>{const{barStyle:e}=o;return{...e,width:s.value}});return t({getEl:()=>a.value,setWidth:e=>{s.value=e}}),(t,o)=>(T(),z("div",{ref_key:"barRef",ref:a,class:Q([e.toLeft&&"transition-width !w-0 duration-300","bg-success absolute h-full"]),style:U(n.value)},null,6))}}),Ze=f($({__name:"slider-captcha-content",props:{contentStyle:{},isPassing:{type:Boolean},successText:{},text:{}},setup(e,{expose:t}){const o=e,a=K("contentRef"),s=F(()=>{const{contentStyle:e}=o;return{...e}});return t({getEl:()=>a.value}),(t,o)=>(T(),z("div",{ref_key:"contentRef",ref:a,class:Q([{[t.$style.success]:e.isPassing},"absolute top-0 flex size-full select-none items-center justify-center text-xs"]),style:U(s.value)},[S(t.$slots,"text",{},()=>[V(q(Qe),{class:"flex h-full items-center"},{default:D(()=>[X(G(e.isPassing?e.successText:e.text),1)]),_:1})])],6))}}),[["__cssModules",{$style:{success:"_success_fwxn1_2"}}]]),He=$({__name:"index",props:Z({class:{},actionStyle:{default:()=>({})},barStyle:{default:()=>({})},contentStyle:{default:()=>({})},wrapperStyle:{default:()=>({})},isSlot:{type:Boolean,default:!1},successText:{default:""},text:{default:""}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:Z(["end","move","start","success"],["update:modelValue"]),setup(e,{expose:t,emit:o}){const a=e,s=o,n=H(e,"modelValue"),l=J({endTime:0,isMoving:!1,isPassing:!1,moveDistance:0,startTime:0,toLeft:!1});t({resume:b});const i=K("wrapperRef"),r=K("barRef"),u=K("contentRef"),c=K("actionRef");function d(e){return"pageX"in e?e.pageX:"touches"in e&&e.touches[0]?e.touches[0].pageX:0}function p(e){l.isPassing||c.value&&(s("start",e),l.moveDistance=d(e)-Number.parseInt(c.value.getStyle().left.replace("px","")||"0",10),l.startTime=Date.now(),l.isMoving=!0)}function f(e){const t=i.value?.offsetWidth??220,o=e?.offsetWidth??40;return{actionWidth:o,offset:t-o-6,wrapperWidth:t}}function g(e){const{isMoving:t,moveDistance:o}=l;if(t){const t=q(c),n=q(r);if(!t||!n)return;const{actionWidth:l,offset:i,wrapperWidth:u}=f(t.getEl()),p=d(e)-o;s("move",{event:e,moveDistance:o,moveX:p}),p>0&&p<=i?(t.setLeft(`${p}px`),n.setWidth(`${p+l/2}px`)):p>i&&(t.setLeft(u-l+"px"),n.setWidth(u-l/2+"px"),a.isSlot||h())}}function y(e){const{isMoving:t,isPassing:o,moveDistance:i}=l;if(t&&!o){s("end",e);const t=c.value,o=q(r);if(!t||!o)return;const p=d(e)-i,{actionWidth:m,offset:g,wrapperWidth:y}=f(t.getEl());p<g?a.isSlot?setTimeout(()=>{if(n.value){const e=q(u);e&&(e.getEl().style.width=`${Number.parseInt(o.getEl().style.width)}px`)}else b()},0):b():(t.setLeft(y-m+"px"),o.setWidth(y-m/2+"px"),h()),l.isMoving=!1}}function h(){a.isSlot?b():(l.endTime=Date.now(),l.isPassing=!0,l.isMoving=!1)}function b(){l.isMoving=!1,l.isPassing=!1,l.moveDistance=0,l.toLeft=!1,l.startTime=0,l.endTime=0;const e=q(c),t=q(r),o=q(u);e&&t&&o&&(o.getEl().style.width="100%",l.toLeft=!0,te(()=>{l.toLeft=!1,e.setLeft("0"),t.setWidth("0")},300))}return Y(()=>l.isPassing,e=>{if(e){const{endTime:t,startTime:o}=l;s("success",{isPassing:e,time:((t-o)/1e3).toFixed(1)}),n.value=e}}),ee(()=>{l.isPassing=!!n.value}),(t,o)=>(T(),z("div",{ref_key:"wrapperRef",ref:i,class:Q(q(N)("border-border bg-background-deep relative flex h-10 w-full items-center overflow-hidden rounded-md border text-center",a.class)),style:U(e.wrapperStyle),onMouseleave:y,onMousemove:g,onMouseup:y,onTouchend:y,onTouchmove:g},[V(Ge,{ref_key:"barRef",ref:r,"bar-style":e.barStyle,"to-left":l.toLeft},null,8,["bar-style","to-left"]),V(Ze,{ref_key:"contentRef",ref:u,"content-style":e.contentStyle,"is-passing":l.isPassing,"success-text":e.successText||q(m)("ui.captcha.sliderSuccessText"),text:e.text||q(m)("ui.captcha.sliderDefaultText")},oe({_:2},[t.$slots.text?{name:"text",fn:D(()=>[S(t.$slots,"text",{isPassing:l.isPassing})]),key:"0"}:void 0]),1032,["content-style","is-passing","success-text","text"]),V(Xe,{ref_key:"actionRef",ref:c,"action-style":e.actionStyle,"is-passing":l.isPassing,"to-left":l.toLeft,onMousedown:p,onTouchstart:p},oe({_:2},[t.$slots.actionIcon?{name:"icon",fn:D(()=>[S(t.$slots,"actionIcon",{isPassing:l.isPassing})]),key:"0"}:void 0]),1032,["action-style","is-passing","to-left"])],38))}}),[Je,Ye]=o("VbenAlertContext"),et={class:"flex items-center"},tt={class:"flex-auto"},ot={class:"m-4 min-h-[30px]"},at=$({__name:"alert",props:Z({beforeClose:{},bordered:{type:Boolean,default:!0},buttonAlign:{default:"end"},cancelText:{},centered:{type:Boolean,default:!0},confirmText:{},containerClass:{},content:{},contentClass:{},contentMasking:{type:Boolean},footer:{},icon:{},overlayBlur:{},showCancel:{type:Boolean},title:{}},{open:{type:Boolean,default:!1},openModifiers:{}}),emits:Z(["closed","confirm","opened"],["update:open"]),setup(e,{emit:t}){const o=e,a=t,s=H(e,"open"),{$t:n}=g(),l=y.getComponents(),i=R(!1);function r(){a("closed",i.value),i.value=!1}function u(){i.value=!1}const c=F(()=>{let e=null;if(o.icon){if("string"==typeof o.icon)switch(o.icon){case"error":e=ae(h,{style:{color:"hsl(var(--destructive))"}});break;case"info":e=ae(je,{style:{color:"hsl(var(--info))"}});break;case"question":e=ye;break;case"success":e=ae(Be,{style:{color:"hsl(var(--success))"}});break;case"warning":e=ae(ge,{style:{color:"hsl(var(--warning))"}});break;default:e=null}}else e=o.icon??null;return e});function d(){i.value=!0,a("confirm")}function p(){i.value=!1}Ye({doCancel:function(){p(),m(!1)},doConfirm:function(){d(),m(!1)}});const f=R(!1);async function m(e){if(await j(),!e&&o.beforeClose){f.value=!0;try{!1!==await o.beforeClose({isConfirm:i.value})&&(s.value=!1)}finally{f.value=!1}}else s.value=e}return(t,o)=>(T(),A(q(Oe),{open:s.value,"onUpdate:open":m},{default:D(()=>[V(q(Ue),{open:s.value,centered:e.centered,"overlay-blur":e.overlayBlur,onOpened:o[0]||(o[0]=e=>a("opened")),onClosed:r,onEscapeKeyDown:u,class:Q(q(N)(e.containerClass,"left-0 right-0 mx-auto flex max-h-[80%] flex-col p-0 duration-300 sm:w-[520px] sm:max-w-[80%] sm:rounded-[var(--radius)]",{"border border-border":e.bordered,"shadow-3xl":!e.bordered}))},{default:D(()=>[se("div",{class:Q(q(N)("relative flex-1 overflow-y-auto p-3",e.contentClass))},[e.title?(T(),A(q(Ke),{key:0},{default:D(()=>[se("div",et,[(T(),A(ne(c.value),{class:"mr-2"})),se("span",tt,G(q(n)(e.title)),1),e.showCancel?(T(),A(q(Fe),{key:0,"as-child":""},{default:D(()=>[V(q(b),{variant:"ghost",size:"icon",class:"rounded-full",disabled:f.value,onClick:p},{default:D(()=>[V(q(Pe),{class:"size-4 text-muted-foreground"})]),_:1},8,["disabled"])]),_:1})):W("",!0)])]),_:1})):W("",!0),V(q(Ne),null,{default:D(()=>[se("div",ot,[V(q($e),{content:e.content,"render-br":""},null,8,["content"])]),f.value&&e.contentMasking?(T(),A(q(v),{key:0,spinning:f.value},null,8,["spinning"])):W("",!0)]),_:1}),se("div",{class:Q(["flex items-center justify-end gap-x-2",`justify-${e.buttonAlign}`])},[V(q($e),{content:e.footer},null,8,["content"]),e.showCancel?(T(),A(q(Fe),{key:0,"as-child":""},{default:D(()=>[(T(),A(ne(q(l).DefaultButton||q(b)),{disabled:f.value,variant:"ghost",onClick:p},{default:D(()=>[X(G(e.cancelText||q(n)("cancel")),1)]),_:1},8,["disabled"]))]),_:1})):W("",!0),V(q(ze),{"as-child":""},{default:D(()=>[(T(),A(ne(q(l).PrimaryButton||q(b)),{loading:f.value,onClick:d},{default:D(()=>[X(G(e.confirmText||q(n)("confirm")),1)]),_:1},8,["loading"]))]),_:1})],2)],2)]),_:1},8,["open","centered","overlay-blur","class"])]),_:1},8,["open"]))}}),st=R([]),{$t:nt}=g();const lt=$({__name:"dingding-login",props:{clientId:{},corpId:{},redirectUri:{},isQrCode:{type:Boolean}},setup(e){const t=e,o=x(),[a,s]=Le({header:!1,footer:!1,fullscreenButton:!1,class:"w-[302px] h-[302px] dingding-qrcode-login-modal",onOpened(){l()}}),n=()=>{const{redirectUri:e}=t;return e||window.location.origin+o.fullPath},l=async()=>{const{clientId:e,corpId:o}=t;window.DTFrameLogin||await ie("https://g.alicdn.com/dingding/h5-dingtalk-login/0.21.0/ddlogin.js"),window.DTFrameLogin({id:"dingding_qrcode_login_element",width:300,height:300},{redirect_uri:encodeURIComponent(n()),client_id:e,scope:"openid corpid",response_type:"code",state:"1",prompt:"consent",corpId:o},e=>{const{redirectUrl:t}=e;window.location.href=t},e=>{var t;t=`Login Error: ${e}`,new Promise((e,o)=>{const a=le(t)?{content:t}:{...t},s=document.createElement("div");document.body.append(s);const n={container:s,instance:null},l={onClosed:t=>{st.value=st.value.filter(e=>e!==n),_(null,s),s.parentNode&&s.remove(),t?e():o(new Error("dialog cancelled"))},...a,open:!0,title:a.title??nt.value("prompt")},i=ae(at,l);_(i,s),n.instance=i.component?.proxy,st.value.push(n)})})},i=()=>{const{clientId:e,corpId:o,isQrCode:a}=t;a?s.open():window.location.href=`https://login.dingtalk.com/oauth2/auth?redirect_uri=${encodeURIComponent(n())}&response_type=code&client_id=${e}&scope=openid&corpid=${o}&prompt=consent`};return(e,t)=>(T(),z("div",null,[V(q(w),{onClick:i,tooltip:q(m)("authentication.dingdingLogin"),"tooltip-side":"top"},{default:D(()=>[V(q(ce))]),_:1},8,["tooltip"]),V(q(a),null,{default:D(()=>[...t[0]||(t[0]=[se("div",{id:"dingding_qrcode_login_element"},null,-1)])]),_:1})]))}}),it={VITE_GLOB_API_URL:"/"},rt={class:"w-full sm:mx-auto md:max-w-md"},ut={class:"mt-4 flex items-center justify-between"},ct={class:"text-muted-foreground text-center text-xs uppercase"},dt={class:"mt-4 flex flex-wrap justify-center"},pt=$({name:"ThirdPartyLogin",__name:"third-party-login",setup(e){const{auth:{dingding:t}}=k(it,!0);return(e,o)=>(T(),z("div",rt,[se("div",ut,[o[0]||(o[0]=se("span",{class:"border-input w-[35%] border-b dark:border-gray-600"},null,-1)),se("span",ct,G(q(m)("authentication.thirdPartyLogin")),1),o[1]||(o[1]=se("span",{class:"border-input w-[35%] border-b dark:border-gray-600"},null,-1))]),se("div",dt,[V(q(w),{tooltip:q(m)("authentication.wechatLogin"),"tooltip-side":"top",class:"mb-3"},{default:D(()=>[V(q(de))]),_:1},8,["tooltip"]),V(q(w),{tooltip:q(m)("authentication.qqLogin"),"tooltip-side":"top",class:"mb-3"},{default:D(()=>[V(q(pe))]),_:1},8,["tooltip"]),V(q(w),{tooltip:q(m)("authentication.githubLogin"),"tooltip-side":"top",class:"mb-3"},{default:D(()=>[V(q(fe))]),_:1},8,["tooltip"]),V(q(w),{tooltip:q(m)("authentication.googleLogin"),"tooltip-side":"top",class:"mb-3"},{default:D(()=>[V(q(me))]),_:1},8,["tooltip"]),q(t)?(T(),A(lt,{key:0,"corp-id":q(t).corpId,"client-id":q(t).clientId,class:"mb-3"},null,8,["corp-id","client-id"])):W("",!0)])]))}}),ft=["onKeydown"],mt={class:"text-muted-foreground"},gt={key:0,class:"mb-6 flex justify-between"},yt={class:"flex-center"},ht={key:1,class:"mb-2 mt-4 flex items-center justify-between"},bt={key:0,class:"mt-3 text-center text-sm"},vt=$({name:"AuthenticationLogin",__name:"login",props:{formSchema:{default:()=>[]},codeLoginPath:{default:"/auth/code-login"},forgetPasswordPath:{default:"/auth/forget-password"},loading:{type:Boolean,default:!1},qrCodeLoginPath:{default:"/auth/qrcode-login"},registerPath:{default:"/auth/register"},showCodeLogin:{type:Boolean,default:!0},showForgetPassword:{type:Boolean,default:!0},showQrcodeLogin:{type:Boolean,default:!0},showRegister:{type:Boolean,default:!0},showRememberMe:{type:Boolean,default:!0},showThirdPartyLogin:{type:Boolean,default:!0},subTitle:{default:""},title:{default:""},submitButtonText:{default:""}},emits:["submit"],setup(e,{expose:t,emit:o}){const s=e,n=o,[l,i]=he(J({commonConfig:{hideLabel:!0,hideRequiredMark:!0},schema:F(()=>s.formSchema),showDefaultActions:!1})),r=C(),u=`REMEMBER_ME_USERNAME_${location.hostname}`,c=localStorage.getItem(u)||"",d=R(!!c);async function p(){const{valid:e}=await i.validate(),t=await i.getValues();e&&(localStorage.setItem(u,d.value?t?.username:""),n("submit",t))}function f(e){r.push(e)}return O(()=>{c&&i.setFieldValue("username",c)}),t({getFormApi:()=>i}),(t,o)=>(T(),z("div",{onKeydown:P(a(p,["prevent"]),["enter"])},[S(t.$slots,"title",{},()=>[V(ue,null,{desc:D(()=>[se("span",mt,[S(t.$slots,"subTitle",{},()=>[X(G(e.subTitle||q(m)("authentication.loginSubtitle")),1)])])]),default:D(()=>[S(t.$slots,"title",{},()=>[X(G(e.title||`${q(m)("authentication.welcomeBack")} ðŸ‘‹ðŸ»`),1)])]),_:3})]),V(q(l)),e.showRememberMe||e.showForgetPassword?(T(),z("div",gt,[se("div",yt,[e.showRememberMe?(T(),A(q(B),{key:0,modelValue:d.value,"onUpdate:modelValue":o[0]||(o[0]=e=>d.value=e),name:"rememberMe"},{default:D(()=>[X(G(q(m)("authentication.rememberMe")),1)]),_:1},8,["modelValue"])):W("",!0)]),e.showForgetPassword?(T(),z("span",{key:0,class:"vben-link text-sm font-normal",onClick:o[1]||(o[1]=t=>f(e.forgetPasswordPath))},G(q(m)("authentication.forgetPassword")),1)):W("",!0)])):W("",!0),V(q(b),{class:Q([{"cursor-wait":e.loading},"w-full"]),loading:e.loading,"aria-label":"login",onClick:p},{default:D(()=>[X(G(e.submitButtonText||q(m)("common.login")),1)]),_:1},8,["class","loading"]),e.showCodeLogin||e.showQrcodeLogin?(T(),z("div",ht,[e.showCodeLogin?(T(),A(q(b),{key:0,class:"w-1/2",variant:"outline",onClick:o[2]||(o[2]=t=>f(e.codeLoginPath))},{default:D(()=>[X(G(q(m)("authentication.mobileLogin")),1)]),_:1})):W("",!0),e.showQrcodeLogin?(T(),A(q(b),{key:1,class:"ml-4 w-1/2",variant:"outline",onClick:o[3]||(o[3]=t=>f(e.qrCodeLoginPath))},{default:D(()=>[X(G(q(m)("authentication.qrcodeLogin")),1)]),_:1})):W("",!0)])):W("",!0),S(t.$slots,"third-party-login",{},()=>[e.showThirdPartyLogin?(T(),A(pt,{key:0})):W("",!0)]),S(t.$slots,"to-register",{},()=>[e.showRegister?(T(),z("div",bt,[X(G(q(m)("authentication.accountTip"))+" ",1),se("span",{class:"vben-link text-sm font-normal",onClick:o[4]||(o[4]=t=>f(e.registerPath))},G(q(m)("authentication.createAccount")),1)])):W("",!0)])],40,ft))}}),_t=$({name:"Login",__name:"login",setup(e){const t=L(),o=[{label:"Super",value:"vben"},{label:"Admin",value:"admin"},{label:"User",value:"jack"}],a=F(()=>[{component:"VbenSelect",componentProps:{options:o,placeholder:m("authentication.selectAccount")},fieldName:"selectAccount",label:m("authentication.selectAccount"),rules:be().min(1,{message:m("authentication.selectAccount")}).optional().default("vben")},{component:"VbenInput",componentProps:{placeholder:m("authentication.usernameTip")},dependencies:{trigger(e,t){if(e.selectAccount){const a=o.find(t=>t.value===e.selectAccount);a&&t.setValues({password:"123456",username:a.value})}},triggerFields:["selectAccount"]},fieldName:"username",label:m("authentication.username"),rules:be().min(1,{message:m("authentication.usernameTip")})},{component:"VbenInputPassword",componentProps:{placeholder:m("authentication.password")},fieldName:"password",label:m("authentication.password"),rules:be().min(1,{message:m("authentication.passwordTip")})},{component:re(He),fieldName:"captcha",rules:ve().refine(e=>e,{message:m("authentication.verifyRequiredTip")})}]);return(e,o)=>(T(),A(q(vt),{"form-schema":a.value,loading:q(t).loginLoading,onSubmit:q(t).authLogin},null,8,["form-schema","loading","onSubmit"]))}});export{_t as _};
