import{a3 as e,aj as t,ak as a,ab as s,a7 as n,al as r,am as i,p as o,aS as l,aT as u,aY as d,aZ as c,aq as p,aA as h,ay as m,az as f,aD as v,bt as y,bh as g,Q as _,m as b,a1 as k,bu as x,bv as w,aX as C,bw as T,bx as O,by as S,aB as A,E as N,bz as Z,a2 as j,U as F,ao as R,F as E,as as $,ah as P,bA as I,L as V,bB as M,bs as L,ae as B,aV as z,an as D,b3 as q,ar as U,aw as W,ax as K,V as H,bC as Y,ac as Q,aN as J,aR as G,b0 as X,b2 as ee,a0 as te,aL as ae,R as se,aa as ne,f as re}from"../app.js";import{b3 as ie,bb as oe,bc as le,bd as ue,be as de,bf as ce,bg as pe,bh as he,bi as me,bj as fe,bk as ve,bl as ye,bm as ge,$ as _e,Z as be,bn as ke,bo as xe,bp as we,bq as Ce,br as Te}from"./bootstrap.js";import{u as Oe,_ as Se,a as Ae,b as Ne,c as Ze}from"./FormLabel.vue_vue_type_script_setup_true_lang.js";import{_ as je}from"./render-content.vue_vue_type_script_lang.js";const Fe=ie("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Re=ie("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ee=e({__name:"FormMessage",setup(e){const{formMessageId:r,name:i}=Oe();return(e,o)=>(a(),t(s(oe),{id:s(r),name:n(s(i)),as:"p",class:"text-[0.8rem] text-destructive"},null,8,["id","name"]))}}),$e=e({inheritAttrs:!1,__name:"help-tooltip",props:{triggerClass:{}},setup:e=>(n,d)=>(a(),t(le,{"delay-duration":300,side:"right"},{trigger:r(()=>[i(n.$slots,"trigger",{},()=>[o(s(Re),{class:l(s(u)("inline-flex size-5 cursor-pointer text-foreground/80 hover:text-foreground",e.triggerClass))},null,8,["class"])])]),default:r(()=>[i(n.$slots,"default")]),_:3}))}),Pe=e({__name:"expandable-arrow",props:d({class:{}},{modelValue:{default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,n=c(e,"modelValue");return(e,r)=>(a(),p("div",{class:l(s(u)("vben-link inline-flex items-center",t.class)),onClick:r[0]||(r[0]=e=>n.value=!n.value)},[i(e.$slots,"default",{isExpanded:n.value},()=>[m(f(n.value),1)]),h("div",{class:l([{"rotate-180":!n.value},"transition-transform duration-300"])},[i(e.$slots,"icon",{},()=>[o(s(ue),{class:"size-4"})])],2)],2))}}),Ie=v(import.meta.url,{interopDefault:!0,alias:{"@vben-core/shared":"E:/Project/Chet/Chet.QuartzNet.UI.Github/Chet.QuartzNet.UI/src/Chet.QuartzNet.Web/packages/@core/base/shared"},transformOptions:{babel:{plugins:[]}}}),Ve=await Ie.import("E:/Project/Chet/Chet.QuartzNet.UI.Github/Chet.QuartzNet.UI/src/Chet.QuartzNet.Web/packages/@core/base/shared/src/store.ts");Ve.shallow;const Me=Ve.useStore;Ve.Derived,Ve.Effect;const Le=Ve.Store;Ve.__depsThatHaveWrittenThisTick,Ve.__derivedToStore,Ve.__flush,Ve.__storeToDerived,Ve.batch,Ve.isUpdaterFunction;class Be{form={};isMounted=!1;state=null;stateHandler;store;componentRefMap=new Map;latestSubmissionValues=null;prevState=null;constructor(e={}){const{...t}=e,a={actionWrapperClass:"",collapsed:!1,collapsedRows:1,collapseTriggerResize:!1,commonConfig:{},handleReset:void 0,handleSubmit:void 0,handleValuesChange:void 0,handleCollapsedChange:void 0,layout:"horizontal",resetButtonOptions:{},schema:[],scrollToFirstError:!1,showCollapseButton:!1,showDefaultActions:!0,submitButtonOptions:{},submitOnChange:!1,submitOnEnter:!1,wrapperClass:"grid-cols-1"};this.store=new Le({...a,...t},{onUpdate:()=>{this.prevState=this.state,this.state=this.store.state,this.updateState()}}),this.state=this.store.state,this.stateHandler=new y,g(this)}getFieldComponentRef(e){let t=this.componentRefMap.has(e)?this.componentRefMap.get(e):void 0;return t&&"AsyncComponentWrapper"===t.$.type.name&&t.$.subTree.ref&&(Array.isArray(t.$.subTree.ref)?t.$.subTree.ref.length>0&&_(t.$.subTree.ref[0]?.r)&&(t=t.$.subTree.ref[0]?.r.value):_(t.$.subTree.ref.r)&&(t=t.$.subTree.ref.r.value)),t}getFocusedField(){for(const e of this.componentRefMap.keys()){const t=this.getFieldComponentRef(e);if(t){let a=null;if(t instanceof HTMLElement?a=t:t.$el instanceof HTMLElement&&(a=t.$el),!a)continue;if(a===document.activeElement||a.contains(document.activeElement))return e}}}getLatestSubmissionValues(){return this.latestSubmissionValues||{}}getState(){return this.state}async getValues(){const e=await this.getForm();return e.values?this.handleRangeTimeValue(e.values):{}}async isFieldValid(e){return(await this.getForm()).isFieldValid(e)}merge(e){const t=[this,e],a=new Proxy(e,{get:(e,s)=>"merge"===s?e=>(t.push(e),a):"submitAllForm"===s?async(e=!0)=>{try{const a=await Promise.all(t.map(async e=>{if(!(await e.validate()).valid)return;return b(await e.getValues()||{})}));if(e){return Object.assign({},...a)}return a}catch(a){}}:e[s]});return a}mount(e,t){this.isMounted||(Object.assign(this.form,e),this.stateHandler.setConditionTrue(),this.setLatestSubmissionValues({...b(this.handleRangeTimeValue(this.form.values))}),this.componentRefMap=t,this.isMounted=!0)}async removeSchemaByFields(e){const t=new Set(e),a=(this.state?.schema??[]).filter(e=>!t.has(e.fieldName));this.setState({schema:a})}async resetForm(e,t){return(await this.getForm()).resetForm(e,t)}async resetValidate(){const e=await this.getForm();Object.keys(e.errors.value).forEach(t=>{e.setFieldError(t,void 0)})}scrollToFirstError(e){const t="string"==typeof e?e:Object.keys(e)[0];if(!t)return;let a=document.querySelector(`[name="${t}"]`);if(!a){const e=this.getFieldComponentRef(t);e&&e.$el instanceof HTMLElement&&(a=e.$el)}a&&a.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}async setFieldValue(e,t,a){(await this.getForm()).setFieldValue(e,t,a)}setLatestSubmissionValues(e){this.latestSubmissionValues={...b(e)}}setState(e){k(e)?this.store.setState(t=>x(e(t),t)):this.store.setState(t=>x(e,t))}async setValues(e,t=!0,a=!1){const s=await this.getForm();if(!t)return void s.setValues(e,a);const n=w((e,t,a)=>(t in e&&(e[t]=Array.isArray(e[t])||!C(e[t])||T(e[t])||O(e[t])?a:n(a,e[t])),!0)),r=n(e,s.values);s.setValues(r,a)}async submitForm(e){e?.preventDefault(),e?.stopPropagation();const t=await this.getForm();await t.submitForm();const a=b(await this.getValues());return await(this.state?.handleSubmit?.(a)),a}unmount(){this.form?.resetForm?.(),this.latestSubmissionValues=null,this.isMounted=!1,this.stateHandler.reset()}updateSchema(e){const t=[...e];if(!t.every(e=>Reflect.has(e,"fieldName")&&e.fieldName))return;const a=[...this.state?.schema??[]],s={};t.forEach(e=>{e.fieldName&&(s[e.fieldName]=e)}),a.forEach((e,t)=>{const n=s[e.fieldName];n&&(a[t]=x(n,e))}),this.setState({schema:a})}async validate(e){const t=await this.getForm(),a=await t.validate(e);return Object.keys(a?.errors??{}).length>0&&this.state?.scrollToFirstError&&this.scrollToFirstError(a.errors),a}async validateAndSubmitForm(){const e=await this.getForm(),{valid:t,errors:a}=await e.validate();if(t)return await this.submitForm();this.state?.scrollToFirstError&&this.scrollToFirstError(a)}async validateField(e,t){const a=await this.getForm(),s=await a.validateField(e,t);return Object.keys(s?.errors??{}).length>0&&this.state?.scrollToFirstError&&this.scrollToFirstError(e),s}async getForm(){if(this.isMounted||await this.stateHandler.waitForCondition(),!this.form?.meta)throw new Error("<VbenForm /> is not mounted");return this.form}handleMultiFields=e=>{const t=this.state?.arrayToStringFields;if(!t||!Array.isArray(t))return;const a=(t,a=",")=>{this.processFields(t,a,e,(e,t)=>{if(Array.isArray(e))return e.join(t);if("string"==typeof e){if(""===e)return[];const a=t.replaceAll(/[.*+?^${}()|[\]\\]/g,String.raw`\$&`);return e.split(new RegExp(a))}return e})};if(t.every(e=>"string"==typeof e)){const e=t[t.length-1]||"",s=1===e.length?t.slice(0,-1):t,n=1===e.length?e:",";return void a(s,n)}t.forEach(e=>{if(Array.isArray(e)){const[t,s=","]=e;if(!Array.isArray(t))return;a(t,s)}})};handleRangeTimeValue=e=>{const t={...e},a=this.state?.fieldMappingTime;return this.handleMultiFields(t),a&&Array.isArray(a)?(a.forEach(([e,[a,s],n="YYYY-MM-DD"])=>{if(a&&s&&null===t[e]&&(Reflect.deleteProperty(t,a),Reflect.deleteProperty(t,s)),!t[e])return void Reflect.deleteProperty(t,e);const[r,i]=t[e];if(null===n)t[a]=r,t[s]=i;else if(k(n))t[a]=n(r,a),t[s]=n(i,s);else{const[e,o]=Array.isArray(n)?n:[n,n];t[a]=r?S(r,e):void 0,t[s]=i?S(i,o):void 0}Reflect.deleteProperty(t,e)}),t):t};processFields=(e,t,a,s)=>{e.forEach(e=>{const n=a[e];null!=n&&(a[e]=s(n,t))})};updateState(){const e=this.state?.schema??[],t=this.prevState?.schema??[];if(e.length<t.length){const a=new Set(e.map(e=>e.fieldName)),s=t.filter(e=>!a.has(e.fieldName));for(const e of s)this.form?.setFieldValue?.(e.fieldName,void 0)}}}var ze,De,qe;(De=ze||(ze={})).assertEqual=e=>{},De.assertIs=function(e){},De.assertNever=function(e){throw new Error},De.arrayToEnum=e=>{const t={};for(const a of e)t[a]=a;return t},De.getValidEnumValues=e=>{const t=De.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),a={};for(const s of t)a[s]=e[s];return De.objectValues(a)},De.objectValues=e=>De.objectKeys(e).map(function(t){return e[t]}),De.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.push(a);return t},De.find=(e,t)=>{for(const a of e)if(t(a))return a},De.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,De.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},De.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(qe||(qe={})).mergeShapes=(e,t)=>({...e,...t});const Ue=ze.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),We=e=>{switch(typeof e){case"undefined":return Ue.undefined;case"string":return Ue.string;case"number":return Number.isNaN(e)?Ue.nan:Ue.number;case"boolean":return Ue.boolean;case"function":return Ue.function;case"bigint":return Ue.bigint;case"symbol":return Ue.symbol;case"object":return Array.isArray(e)?Ue.array:null===e?Ue.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?Ue.promise:"undefined"!=typeof Map&&e instanceof Map?Ue.map:"undefined"!=typeof Set&&e instanceof Set?Ue.set:"undefined"!=typeof Date&&e instanceof Date?Ue.date:Ue.object;default:return Ue.unknown}},Ke=ze.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class He extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},a={_errors:[]},s=e=>{for(const n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(s);else if("invalid_return_type"===n.code)s(n.returnTypeError);else if("invalid_arguments"===n.code)s(n.argumentsError);else if(0===n.path.length)a._errors.push(t(n));else{let e=a,s=0;for(;s<n.path.length;){const a=n.path[s];s===n.path.length-1?(e[a]=e[a]||{_errors:[]},e[a]._errors.push(t(n))):e[a]=e[a]||{_errors:[]},e=e[a],s++}}};return s(this),a}static assert(e){if(!(e instanceof He))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ze.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},a=[];for(const s of this.issues)if(s.path.length>0){const a=s.path[0];t[a]=t[a]||[],t[a].push(e(s))}else a.push(e(s));return{formErrors:a,fieldErrors:t}}get formErrors(){return this.flatten()}}He.create=e=>new He(e);const Ye=(e,t)=>{let a;switch(e.code){case Ke.invalid_type:a=e.received===Ue.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case Ke.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(e.expected,ze.jsonStringifyReplacer)}`;break;case Ke.unrecognized_keys:a=`Unrecognized key(s) in object: ${ze.joinValues(e.keys,", ")}`;break;case Ke.invalid_union:a="Invalid input";break;case Ke.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${ze.joinValues(e.options)}`;break;case Ke.invalid_enum_value:a=`Invalid enum value. Expected ${ze.joinValues(e.options)}, received '${e.received}'`;break;case Ke.invalid_arguments:a="Invalid function arguments";break;case Ke.invalid_return_type:a="Invalid function return type";break;case Ke.invalid_date:a="Invalid date";break;case Ke.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(a=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(a=`${a} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?a=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?a=`Invalid input: must end with "${e.validation.endsWith}"`:ze.assertNever(e.validation):a="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case Ke.too_small:a="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case Ke.too_big:a="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case Ke.custom:a="Invalid input";break;case Ke.invalid_intersection_types:a="Intersection results could not be merged";break;case Ke.not_multiple_of:a=`Number must be a multiple of ${e.multipleOf}`;break;case Ke.not_finite:a="Number must be finite";break;default:a=t.defaultError,ze.assertNever(e)}return{message:a}};let Qe=Ye;function Je(e,t){const a=Qe,s=(e=>{const{data:t,path:a,errorMaps:s,issueData:n}=e,r=[...a,...n.path||[]],i={...n,path:r};if(void 0!==n.message)return{...n,path:r,message:n.message};let o="";const l=s.filter(e=>!!e).slice().reverse();for(const u of l)o=u(i,{data:t,defaultError:o}).message;return{...n,path:r,message:o}})({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,a,a===Ye?void 0:Ye].filter(e=>!!e)});e.common.issues.push(s)}class Ge{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const a=[];for(const s of t){if("aborted"===s.status)return Xe;"dirty"===s.status&&e.dirty(),a.push(s.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,t){const a=[];for(const s of t){const e=await s.key,t=await s.value;a.push({key:e,value:t})}return Ge.mergeObjectSync(e,a)}static mergeObjectSync(e,t){const a={};for(const s of t){const{key:t,value:n}=s;if("aborted"===t.status)return Xe;if("aborted"===n.status)return Xe;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"===t.value||void 0===n.value&&!s.alwaysSet||(a[t.value]=n.value)}return{status:e.value,value:a}}}const Xe=Object.freeze({status:"aborted"}),et=e=>({status:"dirty",value:e}),tt=e=>({status:"valid",value:e}),at=e=>"aborted"===e.status,st=e=>"dirty"===e.status,nt=e=>"valid"===e.status,rt=e=>"undefined"!=typeof Promise&&e instanceof Promise;var it,ot;(ot=it||(it={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},ot.toString=e=>"string"==typeof e?e:e?.message;class lt{constructor(e,t,a,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=a,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ut=(e,t)=>{if(nt(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new He(e.common.issues);return this._error=t,this._error}}};function dt(e){if(!e)return{};const{errorMap:t,invalid_type_error:a,required_error:s,description:n}=e;if(t&&(a||s))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:n};return{errorMap:(t,n)=>{const{message:r}=e;return"invalid_enum_value"===t.code?{message:r??n.defaultError}:void 0===n.data?{message:r??s??n.defaultError}:"invalid_type"!==t.code?{message:n.defaultError}:{message:r??a??n.defaultError}},description:n}}class ct{get description(){return this._def.description}_getType(e){return We(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:We(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ge,ctx:{common:e.parent.common,data:e.data,parsedType:We(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(rt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const a=this.safeParse(e,t);if(a.success)return a.data;throw a.error}safeParse(e,t){const a={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:We(e)},s=this._parseSync({data:e,path:a.path,parent:a});return ut(a,s)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:We(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:t});return nt(a)?{value:a.value}:{issues:t.common.issues}}catch(a){a?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>nt(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){const a=await this.safeParseAsync(e,t);if(a.success)return a.data;throw a.error}async safeParseAsync(e,t){const a={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:We(e)},s=this._parse({data:e,path:a.path,parent:a}),n=await(rt(s)?s:Promise.resolve(s));return ut(a,n)}refine(e,t){const a=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,s)=>{const n=e(t),r=()=>s.addIssue({code:Ke.custom,...a(t)});return"undefined"!=typeof Promise&&n instanceof Promise?n.then(e=>!!e||(r(),!1)):!!n||(r(),!1)})}refinement(e,t){return this._refinement((a,s)=>!!e(a)||(s.addIssue("function"==typeof t?t(a,s):t),!1))}_refinement(e){return new da({schema:this,typeName:_a.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return ca.create(this,this._def)}nullable(){return pa.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ht.create(this)}promise(){return ua.create(this,this._def)}or(e){return Jt.create([this,e],this._def)}and(e){return Xt.create(this,e,this._def)}transform(e){return new da({...dt(this._def),schema:this,typeName:_a.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new ha({...dt(this._def),innerType:this,defaultValue:t,typeName:_a.ZodDefault})}brand(){return new va({typeName:_a.ZodBranded,type:this,...dt(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new ma({...dt(this._def),innerType:this,catchValue:t,typeName:_a.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return ya.create(this,e)}readonly(){return ga.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const pt=/^c[^\s-]{8,}$/i,ht=/^[0-9a-z]+$/,mt=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ft=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,vt=/^[a-z0-9_-]{21}$/i,yt=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,gt=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,_t=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let bt;const kt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,xt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,wt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ct=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Tt=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ot=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,St="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",At=new RegExp(`^${St}$`);function Nt(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function Zt(e){return new RegExp(`^${Nt(e)}$`)}function jt(e){let t=`${St}T${Nt(e)}`;const a=[];return a.push(e.local?"Z?":"Z"),e.offset&&a.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${a.join("|")})`,new RegExp(`^${t}$`)}function Ft(e,t){return!("v4"!==t&&t||!kt.test(e))||!("v6"!==t&&t||!wt.test(e))}function Rt(e,t){if(!yt.test(e))return!1;try{const[a]=e.split(".");if(!a)return!1;const s=a.replace(/-/g,"+").replace(/_/g,"/").padEnd(a.length+(4-a.length%4)%4,"="),n=JSON.parse(atob(s));return"object"==typeof n&&null!==n&&((!("typ"in n)||"JWT"===n?.typ)&&(!!n.alg&&(!t||n.alg===t)))}catch{return!1}}function Et(e,t){return!("v4"!==t&&t||!xt.test(e))||!("v6"!==t&&t||!Ct.test(e))}class $t extends ct{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==Ue.string){const t=this._getOrReturnCtx(e);return Je(t,{code:Ke.invalid_type,expected:Ue.string,received:t.parsedType}),Xe}const t=new Ge;let a;for(const s of this._def.checks)if("min"===s.kind)e.data.length<s.value&&(a=this._getOrReturnCtx(e,a),Je(a,{code:Ke.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("max"===s.kind)e.data.length>s.value&&(a=this._getOrReturnCtx(e,a),Je(a,{code:Ke.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("length"===s.kind){const n=e.data.length>s.value,r=e.data.length<s.value;(n||r)&&(a=this._getOrReturnCtx(e,a),n?Je(a,{code:Ke.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):r&&Je(a,{code:Ke.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),t.dirty())}else if("email"===s.kind)_t.test(e.data)||(a=this._getOrReturnCtx(e,a),Je(a,{validation:"email",code:Ke.invalid_string,message:s.message}),t.dirty());else if("emoji"===s.kind)bt||(bt=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),bt.test(e.data)||(a=this._getOrReturnCtx(e,a),Je(a,{validation:"emoji",code:Ke.invalid_string,message:s.message}),t.dirty());else if("uuid"===s.kind)ft.test(e.data)||(a=this._getOrReturnCtx(e,a),Je(a,{validation:"uuid",code:Ke.invalid_string,message:s.message}),t.dirty());else if("nanoid"===s.kind)vt.test(e.data)||(a=this._getOrReturnCtx(e,a),Je(a,{validation:"nanoid",code:Ke.invalid_string,message:s.message}),t.dirty());else if("cuid"===s.kind)pt.test(e.data)||(a=this._getOrReturnCtx(e,a),Je(a,{validation:"cuid",code:Ke.invalid_string,message:s.message}),t.dirty());else if("cuid2"===s.kind)ht.test(e.data)||(a=this._getOrReturnCtx(e,a),Je(a,{validation:"cuid2",code:Ke.invalid_string,message:s.message}),t.dirty());else if("ulid"===s.kind)mt.test(e.data)||(a=this._getOrReturnCtx(e,a),Je(a,{validation:"ulid",code:Ke.invalid_string,message:s.message}),t.dirty());else if("url"===s.kind)try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),Je(a,{validation:"url",code:Ke.invalid_string,message:s.message}),t.dirty()}else if("regex"===s.kind){s.regex.lastIndex=0;s.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),Je(a,{validation:"regex",code:Ke.invalid_string,message:s.message}),t.dirty())}else if("trim"===s.kind)e.data=e.data.trim();else if("includes"===s.kind)e.data.includes(s.value,s.position)||(a=this._getOrReturnCtx(e,a),Je(a,{code:Ke.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),t.dirty());else if("toLowerCase"===s.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===s.kind)e.data=e.data.toUpperCase();else if("startsWith"===s.kind)e.data.startsWith(s.value)||(a=this._getOrReturnCtx(e,a),Je(a,{code:Ke.invalid_string,validation:{startsWith:s.value},message:s.message}),t.dirty());else if("endsWith"===s.kind)e.data.endsWith(s.value)||(a=this._getOrReturnCtx(e,a),Je(a,{code:Ke.invalid_string,validation:{endsWith:s.value},message:s.message}),t.dirty());else if("datetime"===s.kind){jt(s).test(e.data)||(a=this._getOrReturnCtx(e,a),Je(a,{code:Ke.invalid_string,validation:"datetime",message:s.message}),t.dirty())}else if("date"===s.kind){At.test(e.data)||(a=this._getOrReturnCtx(e,a),Je(a,{code:Ke.invalid_string,validation:"date",message:s.message}),t.dirty())}else if("time"===s.kind){Zt(s).test(e.data)||(a=this._getOrReturnCtx(e,a),Je(a,{code:Ke.invalid_string,validation:"time",message:s.message}),t.dirty())}else"duration"===s.kind?gt.test(e.data)||(a=this._getOrReturnCtx(e,a),Je(a,{validation:"duration",code:Ke.invalid_string,message:s.message}),t.dirty()):"ip"===s.kind?Ft(e.data,s.version)||(a=this._getOrReturnCtx(e,a),Je(a,{validation:"ip",code:Ke.invalid_string,message:s.message}),t.dirty()):"jwt"===s.kind?Rt(e.data,s.alg)||(a=this._getOrReturnCtx(e,a),Je(a,{validation:"jwt",code:Ke.invalid_string,message:s.message}),t.dirty()):"cidr"===s.kind?Et(e.data,s.version)||(a=this._getOrReturnCtx(e,a),Je(a,{validation:"cidr",code:Ke.invalid_string,message:s.message}),t.dirty()):"base64"===s.kind?Tt.test(e.data)||(a=this._getOrReturnCtx(e,a),Je(a,{validation:"base64",code:Ke.invalid_string,message:s.message}),t.dirty()):"base64url"===s.kind?Ot.test(e.data)||(a=this._getOrReturnCtx(e,a),Je(a,{validation:"base64url",code:Ke.invalid_string,message:s.message}),t.dirty()):ze.assertNever(s);return{status:t.value,value:e.data}}_regex(e,t,a){return this.refinement(t=>e.test(t),{validation:t,code:Ke.invalid_string,...it.errToObj(a)})}_addCheck(e){return new $t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...it.errToObj(e)})}url(e){return this._addCheck({kind:"url",...it.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...it.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...it.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...it.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...it.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...it.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...it.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...it.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...it.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...it.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...it.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...it.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...it.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...it.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...it.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...it.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...it.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...it.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...it.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...it.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...it.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...it.errToObj(t)})}nonempty(e){return this.min(1,it.errToObj(e))}trim(){return new $t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new $t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new $t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Pt(e,t){const a=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,n=a>s?a:s;return Number.parseInt(e.toFixed(n).replace(".",""))%Number.parseInt(t.toFixed(n).replace(".",""))/10**n}$t.create=e=>new $t({checks:[],typeName:_a.ZodString,coerce:e?.coerce??!1,...dt(e)});class It extends ct{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==Ue.number){const t=this._getOrReturnCtx(e);return Je(t,{code:Ke.invalid_type,expected:Ue.number,received:t.parsedType}),Xe}let t;const a=new Ge;for(const s of this._def.checks)if("int"===s.kind)ze.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),Je(t,{code:Ke.invalid_type,expected:"integer",received:"float",message:s.message}),a.dirty());else if("min"===s.kind){(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),Je(t,{code:Ke.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty())}else if("max"===s.kind){(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),Je(t,{code:Ke.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty())}else"multipleOf"===s.kind?0!==Pt(e.data,s.value)&&(t=this._getOrReturnCtx(e,t),Je(t,{code:Ke.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):"finite"===s.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),Je(t,{code:Ke.not_finite,message:s.message}),a.dirty()):ze.assertNever(s);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,it.toString(t))}gt(e,t){return this.setLimit("min",e,!1,it.toString(t))}lte(e,t){return this.setLimit("max",e,!0,it.toString(t))}lt(e,t){return this.setLimit("max",e,!1,it.toString(t))}setLimit(e,t,a,s){return new It({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:a,message:it.toString(s)}]})}_addCheck(e){return new It({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:it.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:it.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:it.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:it.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:it.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:it.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:it.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:it.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:it.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&ze.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const a of this._def.checks){if("finite"===a.kind||"int"===a.kind||"multipleOf"===a.kind)return!0;"min"===a.kind?(null===t||a.value>t)&&(t=a.value):"max"===a.kind&&(null===e||a.value<e)&&(e=a.value)}return Number.isFinite(t)&&Number.isFinite(e)}}It.create=e=>new It({checks:[],typeName:_a.ZodNumber,coerce:e?.coerce||!1,...dt(e)});class Vt extends ct{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ue.bigint)return this._getInvalidInput(e);let t;const a=new Ge;for(const s of this._def.checks)if("min"===s.kind){(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),Je(t,{code:Ke.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty())}else if("max"===s.kind){(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),Je(t,{code:Ke.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty())}else"multipleOf"===s.kind?e.data%s.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),Je(t,{code:Ke.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):ze.assertNever(s);return{status:a.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Je(t,{code:Ke.invalid_type,expected:Ue.bigint,received:t.parsedType}),Xe}gte(e,t){return this.setLimit("min",e,!0,it.toString(t))}gt(e,t){return this.setLimit("min",e,!1,it.toString(t))}lte(e,t){return this.setLimit("max",e,!0,it.toString(t))}lt(e,t){return this.setLimit("max",e,!1,it.toString(t))}setLimit(e,t,a,s){return new Vt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:a,message:it.toString(s)}]})}_addCheck(e){return new Vt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:it.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:it.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:it.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:it.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:it.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Vt.create=e=>new Vt({checks:[],typeName:_a.ZodBigInt,coerce:e?.coerce??!1,...dt(e)});class Mt extends ct{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==Ue.boolean){const t=this._getOrReturnCtx(e);return Je(t,{code:Ke.invalid_type,expected:Ue.boolean,received:t.parsedType}),Xe}return tt(e.data)}}Mt.create=e=>new Mt({typeName:_a.ZodBoolean,coerce:e?.coerce||!1,...dt(e)});class Lt extends ct{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==Ue.date){const t=this._getOrReturnCtx(e);return Je(t,{code:Ke.invalid_type,expected:Ue.date,received:t.parsedType}),Xe}if(Number.isNaN(e.data.getTime())){return Je(this._getOrReturnCtx(e),{code:Ke.invalid_date}),Xe}const t=new Ge;let a;for(const s of this._def.checks)"min"===s.kind?e.data.getTime()<s.value&&(a=this._getOrReturnCtx(e,a),Je(a,{code:Ke.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),t.dirty()):"max"===s.kind?e.data.getTime()>s.value&&(a=this._getOrReturnCtx(e,a),Je(a,{code:Ke.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),t.dirty()):ze.assertNever(s);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Lt({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:it.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:it.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Lt.create=e=>new Lt({checks:[],coerce:e?.coerce||!1,typeName:_a.ZodDate,...dt(e)});class Bt extends ct{_parse(e){if(this._getType(e)!==Ue.symbol){const t=this._getOrReturnCtx(e);return Je(t,{code:Ke.invalid_type,expected:Ue.symbol,received:t.parsedType}),Xe}return tt(e.data)}}Bt.create=e=>new Bt({typeName:_a.ZodSymbol,...dt(e)});class zt extends ct{_parse(e){if(this._getType(e)!==Ue.undefined){const t=this._getOrReturnCtx(e);return Je(t,{code:Ke.invalid_type,expected:Ue.undefined,received:t.parsedType}),Xe}return tt(e.data)}}zt.create=e=>new zt({typeName:_a.ZodUndefined,...dt(e)});class Dt extends ct{_parse(e){if(this._getType(e)!==Ue.null){const t=this._getOrReturnCtx(e);return Je(t,{code:Ke.invalid_type,expected:Ue.null,received:t.parsedType}),Xe}return tt(e.data)}}Dt.create=e=>new Dt({typeName:_a.ZodNull,...dt(e)});class qt extends ct{constructor(){super(...arguments),this._any=!0}_parse(e){return tt(e.data)}}qt.create=e=>new qt({typeName:_a.ZodAny,...dt(e)});class Ut extends ct{constructor(){super(...arguments),this._unknown=!0}_parse(e){return tt(e.data)}}Ut.create=e=>new Ut({typeName:_a.ZodUnknown,...dt(e)});class Wt extends ct{_parse(e){const t=this._getOrReturnCtx(e);return Je(t,{code:Ke.invalid_type,expected:Ue.never,received:t.parsedType}),Xe}}Wt.create=e=>new Wt({typeName:_a.ZodNever,...dt(e)});class Kt extends ct{_parse(e){if(this._getType(e)!==Ue.undefined){const t=this._getOrReturnCtx(e);return Je(t,{code:Ke.invalid_type,expected:Ue.void,received:t.parsedType}),Xe}return tt(e.data)}}Kt.create=e=>new Kt({typeName:_a.ZodVoid,...dt(e)});class Ht extends ct{_parse(e){const{ctx:t,status:a}=this._processInputParams(e),s=this._def;if(t.parsedType!==Ue.array)return Je(t,{code:Ke.invalid_type,expected:Ue.array,received:t.parsedType}),Xe;if(null!==s.exactLength){const e=t.data.length>s.exactLength.value,n=t.data.length<s.exactLength.value;(e||n)&&(Je(t,{code:e?Ke.too_big:Ke.too_small,minimum:n?s.exactLength.value:void 0,maximum:e?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),a.dirty())}if(null!==s.minLength&&t.data.length<s.minLength.value&&(Je(t,{code:Ke.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),a.dirty()),null!==s.maxLength&&t.data.length>s.maxLength.value&&(Je(t,{code:Ke.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),a.dirty()),t.common.async)return Promise.all([...t.data].map((e,a)=>s.type._parseAsync(new lt(t,e,t.path,a)))).then(e=>Ge.mergeArray(a,e));const n=[...t.data].map((e,a)=>s.type._parseSync(new lt(t,e,t.path,a)));return Ge.mergeArray(a,n)}get element(){return this._def.type}min(e,t){return new Ht({...this._def,minLength:{value:e,message:it.toString(t)}})}max(e,t){return new Ht({...this._def,maxLength:{value:e,message:it.toString(t)}})}length(e,t){return new Ht({...this._def,exactLength:{value:e,message:it.toString(t)}})}nonempty(e){return this.min(1,e)}}function Yt(e){if(e instanceof Qt){const t={};for(const a in e.shape){const s=e.shape[a];t[a]=ca.create(Yt(s))}return new Qt({...e._def,shape:()=>t})}return e instanceof Ht?new Ht({...e._def,type:Yt(e.element)}):e instanceof ca?ca.create(Yt(e.unwrap())):e instanceof pa?pa.create(Yt(e.unwrap())):e instanceof ea?ea.create(e.items.map(e=>Yt(e))):e}Ht.create=(e,t)=>new Ht({type:e,minLength:null,maxLength:null,exactLength:null,typeName:_a.ZodArray,...dt(t)});class Qt extends ct{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=ze.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==Ue.object){const t=this._getOrReturnCtx(e);return Je(t,{code:Ke.invalid_type,expected:Ue.object,received:t.parsedType}),Xe}const{status:t,ctx:a}=this._processInputParams(e),{shape:s,keys:n}=this._getCached(),r=[];if(!(this._def.catchall instanceof Wt&&"strip"===this._def.unknownKeys))for(const o in a.data)n.includes(o)||r.push(o);const i=[];for(const o of n){const e=s[o],t=a.data[o];i.push({key:{status:"valid",value:o},value:e._parse(new lt(a,t,a.path,o)),alwaysSet:o in a.data})}if(this._def.catchall instanceof Wt){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of r)i.push({key:{status:"valid",value:t},value:{status:"valid",value:a.data[t]}});else if("strict"===e)r.length>0&&(Je(a,{code:Ke.unrecognized_keys,keys:r}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of r){const s=a.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new lt(a,s,a.path,t)),alwaysSet:t in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of i){const a=await t.key,s=await t.value;e.push({key:a,value:s,alwaysSet:t.alwaysSet})}return e}).then(e=>Ge.mergeObjectSync(t,e)):Ge.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return it.errToObj,new Qt({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,a)=>{const s=this._def.errorMap?.(t,a).message??a.defaultError;return"unrecognized_keys"===t.code?{message:it.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new Qt({...this._def,unknownKeys:"strip"})}passthrough(){return new Qt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Qt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Qt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:_a.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Qt({...this._def,catchall:e})}pick(e){const t={};for(const a of ze.objectKeys(e))e[a]&&this.shape[a]&&(t[a]=this.shape[a]);return new Qt({...this._def,shape:()=>t})}omit(e){const t={};for(const a of ze.objectKeys(this.shape))e[a]||(t[a]=this.shape[a]);return new Qt({...this._def,shape:()=>t})}deepPartial(){return Yt(this)}partial(e){const t={};for(const a of ze.objectKeys(this.shape)){const s=this.shape[a];e&&!e[a]?t[a]=s:t[a]=s.optional()}return new Qt({...this._def,shape:()=>t})}required(e){const t={};for(const a of ze.objectKeys(this.shape))if(e&&!e[a])t[a]=this.shape[a];else{let e=this.shape[a];for(;e instanceof ca;)e=e._def.innerType;t[a]=e}return new Qt({...this._def,shape:()=>t})}keyof(){return ia(ze.objectKeys(this.shape))}}Qt.create=(e,t)=>new Qt({shape:()=>e,unknownKeys:"strip",catchall:Wt.create(),typeName:_a.ZodObject,...dt(t)}),Qt.strictCreate=(e,t)=>new Qt({shape:()=>e,unknownKeys:"strict",catchall:Wt.create(),typeName:_a.ZodObject,...dt(t)}),Qt.lazycreate=(e,t)=>new Qt({shape:e,unknownKeys:"strip",catchall:Wt.create(),typeName:_a.ZodObject,...dt(t)});class Jt extends ct{_parse(e){const{ctx:t}=this._processInputParams(e),a=this._def.options;if(t.common.async)return Promise.all(a.map(async e=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const s of e)if("dirty"===s.result.status)return t.common.issues.push(...s.ctx.common.issues),s.result;const a=e.map(e=>new He(e.ctx.common.issues));return Je(t,{code:Ke.invalid_union,unionErrors:a}),Xe});{let e;const s=[];for(const r of a){const a={...t,common:{...t.common,issues:[]},parent:null},n=r._parseSync({data:t.data,path:t.path,parent:a});if("valid"===n.status)return n;"dirty"!==n.status||e||(e={result:n,ctx:a}),a.common.issues.length&&s.push(a.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const n=s.map(e=>new He(e));return Je(t,{code:Ke.invalid_union,unionErrors:n}),Xe}}get options(){return this._def.options}}function Gt(e,t){const a=We(e),s=We(t);if(e===t)return{valid:!0,data:e};if(a===Ue.object&&s===Ue.object){const a=ze.objectKeys(t),s=ze.objectKeys(e).filter(e=>-1!==a.indexOf(e)),n={...e,...t};for(const r of s){const a=Gt(e[r],t[r]);if(!a.valid)return{valid:!1};n[r]=a.data}return{valid:!0,data:n}}if(a===Ue.array&&s===Ue.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let s=0;s<e.length;s++){const n=Gt(e[s],t[s]);if(!n.valid)return{valid:!1};a.push(n.data)}return{valid:!0,data:a}}return a===Ue.date&&s===Ue.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}Jt.create=(e,t)=>new Jt({options:e,typeName:_a.ZodUnion,...dt(t)});class Xt extends ct{_parse(e){const{status:t,ctx:a}=this._processInputParams(e),s=(e,s)=>{if(at(e)||at(s))return Xe;const n=Gt(e.value,s.value);return n.valid?((st(e)||st(s))&&t.dirty(),{status:t.value,value:n.data}):(Je(a,{code:Ke.invalid_intersection_types}),Xe)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([e,t])=>s(e,t)):s(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}Xt.create=(e,t,a)=>new Xt({left:e,right:t,typeName:_a.ZodIntersection,...dt(a)});class ea extends ct{_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==Ue.array)return Je(a,{code:Ke.invalid_type,expected:Ue.array,received:a.parsedType}),Xe;if(a.data.length<this._def.items.length)return Je(a,{code:Ke.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Xe;!this._def.rest&&a.data.length>this._def.items.length&&(Je(a,{code:Ke.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...a.data].map((e,t)=>{const s=this._def.items[t]||this._def.rest;return s?s._parse(new lt(a,e,a.path,t)):null}).filter(e=>!!e);return a.common.async?Promise.all(s).then(e=>Ge.mergeArray(t,e)):Ge.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new ea({...this._def,rest:e})}}ea.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ea({items:e,typeName:_a.ZodTuple,rest:null,...dt(t)})};class ta extends ct{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==Ue.object)return Je(a,{code:Ke.invalid_type,expected:Ue.object,received:a.parsedType}),Xe;const s=[],n=this._def.keyType,r=this._def.valueType;for(const i in a.data)s.push({key:n._parse(new lt(a,i,a.path,i)),value:r._parse(new lt(a,a.data[i],a.path,i)),alwaysSet:i in a.data});return a.common.async?Ge.mergeObjectAsync(t,s):Ge.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,a){return new ta(t instanceof ct?{keyType:e,valueType:t,typeName:_a.ZodRecord,...dt(a)}:{keyType:$t.create(),valueType:e,typeName:_a.ZodRecord,...dt(t)})}}class aa extends ct{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==Ue.map)return Je(a,{code:Ke.invalid_type,expected:Ue.map,received:a.parsedType}),Xe;const s=this._def.keyType,n=this._def.valueType,r=[...a.data.entries()].map(([e,t],r)=>({key:s._parse(new lt(a,e,a.path,[r,"key"])),value:n._parse(new lt(a,t,a.path,[r,"value"]))}));if(a.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const a of r){const s=await a.key,n=await a.value;if("aborted"===s.status||"aborted"===n.status)return Xe;"dirty"!==s.status&&"dirty"!==n.status||t.dirty(),e.set(s.value,n.value)}return{status:t.value,value:e}})}{const e=new Map;for(const a of r){const s=a.key,n=a.value;if("aborted"===s.status||"aborted"===n.status)return Xe;"dirty"!==s.status&&"dirty"!==n.status||t.dirty(),e.set(s.value,n.value)}return{status:t.value,value:e}}}}aa.create=(e,t,a)=>new aa({valueType:t,keyType:e,typeName:_a.ZodMap,...dt(a)});class sa extends ct{_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==Ue.set)return Je(a,{code:Ke.invalid_type,expected:Ue.set,received:a.parsedType}),Xe;const s=this._def;null!==s.minSize&&a.data.size<s.minSize.value&&(Je(a,{code:Ke.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),null!==s.maxSize&&a.data.size>s.maxSize.value&&(Je(a,{code:Ke.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const n=this._def.valueType;function r(e){const a=new Set;for(const s of e){if("aborted"===s.status)return Xe;"dirty"===s.status&&t.dirty(),a.add(s.value)}return{status:t.value,value:a}}const i=[...a.data.values()].map((e,t)=>n._parse(new lt(a,e,a.path,t)));return a.common.async?Promise.all(i).then(e=>r(e)):r(i)}min(e,t){return new sa({...this._def,minSize:{value:e,message:it.toString(t)}})}max(e,t){return new sa({...this._def,maxSize:{value:e,message:it.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}sa.create=(e,t)=>new sa({valueType:e,minSize:null,maxSize:null,typeName:_a.ZodSet,...dt(t)});class na extends ct{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}na.create=(e,t)=>new na({getter:e,typeName:_a.ZodLazy,...dt(t)});class ra extends ct{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Je(t,{received:t.data,code:Ke.invalid_literal,expected:this._def.value}),Xe}return{status:"valid",value:e.data}}get value(){return this._def.value}}function ia(e,t){return new oa({values:e,typeName:_a.ZodEnum,...dt(t)})}ra.create=(e,t)=>new ra({value:e,typeName:_a.ZodLiteral,...dt(t)});class oa extends ct{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),a=this._def.values;return Je(t,{expected:ze.joinValues(a),received:t.parsedType,code:Ke.invalid_type}),Xe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),a=this._def.values;return Je(t,{received:t.data,code:Ke.invalid_enum_value,options:a}),Xe}return tt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return oa.create(e,{...this._def,...t})}exclude(e,t=this._def){return oa.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}oa.create=ia;class la extends ct{_parse(e){const t=ze.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==Ue.string&&a.parsedType!==Ue.number){const e=ze.objectValues(t);return Je(a,{expected:ze.joinValues(e),received:a.parsedType,code:Ke.invalid_type}),Xe}if(this._cache||(this._cache=new Set(ze.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=ze.objectValues(t);return Je(a,{received:a.data,code:Ke.invalid_enum_value,options:e}),Xe}return tt(e.data)}get enum(){return this._def.values}}la.create=(e,t)=>new la({values:e,typeName:_a.ZodNativeEnum,...dt(t)});class ua extends ct{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ue.promise&&!1===t.common.async)return Je(t,{code:Ke.invalid_type,expected:Ue.promise,received:t.parsedType}),Xe;const a=t.parsedType===Ue.promise?t.data:Promise.resolve(t.data);return tt(a.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ua.create=(e,t)=>new ua({type:e,typeName:_a.ZodPromise,...dt(t)});class da extends ct{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===_a.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:a}=this._processInputParams(e),s=this._def.effect||null,n={addIssue:e=>{Je(a,e),e.fatal?t.abort():t.dirty()},get path(){return a.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===s.type){const e=s.transform(a.data,n);if(a.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return Xe;const s=await this._def.schema._parseAsync({data:e,path:a.path,parent:a});return"aborted"===s.status?Xe:"dirty"===s.status||"dirty"===t.value?et(s.value):s});{if("aborted"===t.value)return Xe;const s=this._def.schema._parseSync({data:e,path:a.path,parent:a});return"aborted"===s.status?Xe:"dirty"===s.status||"dirty"===t.value?et(s.value):s}}if("refinement"===s.type){const e=e=>{const t=s.refinement(e,n);if(a.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===a.common.async){const s=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return"aborted"===s.status?Xe:("dirty"===s.status&&t.dirty(),e(s.value),{status:t.value,value:s.value})}return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(a=>"aborted"===a.status?Xe:("dirty"===a.status&&t.dirty(),e(a.value).then(()=>({status:t.value,value:a.value}))))}if("transform"===s.type){if(!1===a.common.async){const e=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!nt(e))return Xe;const r=s.transform(e.value,n);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:r}}return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(e=>nt(e)?Promise.resolve(s.transform(e.value,n)).then(e=>({status:t.value,value:e})):Xe)}ze.assertNever(s)}}da.create=(e,t,a)=>new da({schema:e,typeName:_a.ZodEffects,effect:t,...dt(a)}),da.createWithPreprocess=(e,t,a)=>new da({schema:t,effect:{type:"preprocess",transform:e},typeName:_a.ZodEffects,...dt(a)});class ca extends ct{_parse(e){return this._getType(e)===Ue.undefined?tt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ca.create=(e,t)=>new ca({innerType:e,typeName:_a.ZodOptional,...dt(t)});class pa extends ct{_parse(e){return this._getType(e)===Ue.null?tt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}pa.create=(e,t)=>new pa({innerType:e,typeName:_a.ZodNullable,...dt(t)});class ha extends ct{_parse(e){const{ctx:t}=this._processInputParams(e);let a=t.data;return t.parsedType===Ue.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ha.create=(e,t)=>new ha({innerType:e,typeName:_a.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...dt(t)});class ma extends ct{_parse(e){const{ctx:t}=this._processInputParams(e),a={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return rt(s)?s.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new He(a.common.issues)},input:a.data})})):{status:"valid",value:"valid"===s.status?s.value:this._def.catchValue({get error(){return new He(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}ma.create=(e,t)=>new ma({innerType:e,typeName:_a.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...dt(t)});class fa extends ct{_parse(e){if(this._getType(e)!==Ue.nan){const t=this._getOrReturnCtx(e);return Je(t,{code:Ke.invalid_type,expected:Ue.nan,received:t.parsedType}),Xe}return{status:"valid",value:e.data}}}fa.create=e=>new fa({typeName:_a.ZodNaN,...dt(e)});class va extends ct{_parse(e){const{ctx:t}=this._processInputParams(e),a=t.data;return this._def.type._parse({data:a,path:t.path,parent:t})}unwrap(){return this._def.type}}class ya extends ct{_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return"aborted"===e.status?Xe:"dirty"===e.status?(t.dirty(),et(e.value)):this._def.out._parseAsync({data:e.value,path:a.path,parent:a})})()}{const e=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return"aborted"===e.status?Xe:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:a.path,parent:a})}}static create(e,t){return new ya({in:e,out:t,typeName:_a.ZodPipeline})}}class ga extends ct{_parse(e){const t=this._def.innerType._parse(e),a=e=>(nt(e)&&(e.value=Object.freeze(e.value)),e);return rt(t)?t.then(e=>a(e)):a(t)}unwrap(){return this._def.innerType}}var _a,ba;ga.create=(e,t)=>new ga({innerType:e,typeName:_a.ZodReadonly,...dt(t)}),Qt.lazycreate,(ba=_a||(_a={})).ZodString="ZodString",ba.ZodNumber="ZodNumber",ba.ZodNaN="ZodNaN",ba.ZodBigInt="ZodBigInt",ba.ZodBoolean="ZodBoolean",ba.ZodDate="ZodDate",ba.ZodSymbol="ZodSymbol",ba.ZodUndefined="ZodUndefined",ba.ZodNull="ZodNull",ba.ZodAny="ZodAny",ba.ZodUnknown="ZodUnknown",ba.ZodNever="ZodNever",ba.ZodVoid="ZodVoid",ba.ZodArray="ZodArray",ba.ZodObject="ZodObject",ba.ZodUnion="ZodUnion",ba.ZodDiscriminatedUnion="ZodDiscriminatedUnion",ba.ZodIntersection="ZodIntersection",ba.ZodTuple="ZodTuple",ba.ZodRecord="ZodRecord",ba.ZodMap="ZodMap",ba.ZodSet="ZodSet",ba.ZodFunction="ZodFunction",ba.ZodLazy="ZodLazy",ba.ZodLiteral="ZodLiteral",ba.ZodEnum="ZodEnum",ba.ZodEffects="ZodEffects",ba.ZodNativeEnum="ZodNativeEnum",ba.ZodOptional="ZodOptional",ba.ZodNullable="ZodNullable",ba.ZodDefault="ZodDefault",ba.ZodCatch="ZodCatch",ba.ZodPromise="ZodPromise",ba.ZodBranded="ZodBranded",ba.ZodPipeline="ZodPipeline",ba.ZodReadonly="ZodReadonly";const ka=$t.create,xa=Mt.create;Wt.create,Ht.create;const wa=Qt.create;Qt.strictCreate,Jt.create,Xt.create,ea.create,oa.create,ua.create,da.create,ca.create,pa.create,da.createWithPreprocess;const Ca=(e,t)=>e.constructor.name===t.name,Ta=new Map;function Oa(e){const t=e.constructor.name;if(Ta.has(t))return Ta.get(t)(e)}function Sa(e){if(Ca(e,ta))return{};if(Ca(e,da))return Sa(e._def.schema);if(Ca(e,Xt))return{...Sa(e._def.left),...Sa(e._def.right)};if(Ca(e,Jt)){for(const t of e._def.options)if(Ca(t,Qt))return Sa(t);return{}}return Ca(e,Qt)?Object.fromEntries(Object.entries(e.shape).map(([e,t])=>[e,Oa(t)]).filter(e=>void 0!==e[1])):{}}Ta.set(Mt.name,()=>!1),Ta.set(It.name,()=>0),Ta.set($t.name,()=>""),Ta.set(Ht.name,()=>[]),Ta.set(ta.name,()=>({})),Ta.set(ha.name,e=>e._def.defaultValue()),Ta.set(da.name,e=>Oa(e._def.schema)),Ta.set(ca.name,e=>Ca(e._def.innerType,ha)?e._def.innerType._def.defaultValue():void 0),Ta.set(ea.name,e=>{const t=[];for(const a of e._def.items)t.push(Oa(a));return t}),Ta.set(da.name,e=>Oa(e._def.schema)),Ta.set(Jt.name,e=>Oa(e._def.options[0])),Ta.set(Qt.name,e=>Sa(e)),Ta.set(ta.name,e=>Sa(e)),Ta.set(Xt.name,e=>Sa(e));const[Aa,Na]=de("VbenFormProps"),[Za,ja]=de("ComponentRefMap");function Fa(e){const t=A(),a=function(){const t={},a={};(s(e).schema||[]).forEach(e=>{if(Reflect.has(e,"defaultValue"))Z(t,e.fieldName,e.defaultValue);else if(e.rules&&!j(e.rules)){const s=r(e.rules);a[e.fieldName]=e.rules,void 0!==s&&(t[e.fieldName]=s)}});const n=(o=wa(a),Sa(o)),i={};var o;for(const e in n)Z(i,e,n[e]);return x(t,i)}(),n=ce({...Object.keys(a)?.length?{initialValues:a}:{}});function r(e){if(e instanceof $t)return"";if(e instanceof It)return null;if(e instanceof Qt){const t={};for(const[a,s]of Object.entries(e.shape))t[a]=r(s);return t}if(e instanceof Xt){const t=r(e._def.left),a=r(e._def.right);return"object"==typeof t&&"object"==typeof a?{...t,...a}:t??a}}return{delegatedSlots:N(()=>{const e=[];for(const a of Object.keys(t))"default"!==a&&e.push(a);return e}),form:n}}const Ra=e({__name:"form-actions",props:{modelValue:{default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(e,{expose:n}){const{$t:o}=pe(),[d,v]=Aa(),y=c(e,"modelValue"),g=N(()=>({content:`${o.value("reset")}`,show:!0,...s(d).resetButtonOptions})),_=N(()=>({content:`${o.value("submit")}`,show:!0,...s(d).submitButtonOptions}));async function x(e){e?.preventDefault(),e?.stopPropagation();const t=s(d);if(!t.formApi)return;const{valid:a}=await t.formApi.validate();if(!a)return;const n=b(await t.formApi.getValues())??{};await(t.handleSubmit?.(n))}async function w(e){e?.preventDefault(),e?.stopPropagation();const t=s(d),a=b(await(t.formApi?.getValues()))??{};k(t.handleReset)?await(t.handleReset?.(a)):v.resetForm()}F(()=>y.value,()=>{s(d).collapseTriggerResize&&I()});const C=N(()=>{const e=s(d),t=e.actionLayout||"rowEnd",a=e.actionPosition||"right",n=["flex","items-center","gap-3",e.compact?"pb-2":"pb-4","vertical"===e.layout?"self-end":"self-center","inline"===e.layout?"":"w-full",e.actionWrapperClass];switch(t){case"newLine":n.push("col-span-full");break;case"rowEnd":n.push("col-[-2/-1]")}switch(a){case"center":n.push("justify-center");break;case"left":n.push("justify-start");break;default:n.push("justify-end")}return n.join(" ")});return n({handleReset:w,handleSubmit:x}),(e,n)=>(a(),p("div",{class:l(s(u)(C.value))},[s(d).actionButtonsReverse?(a(),p(E,{key:0},[i(e.$slots,"submit-before"),_.value.show?(a(),t($(s(he).PrimaryButton),P({key:0,type:"button",onClick:x},_.value),{default:r(()=>[m(f(_.value.content),1)]),_:1},16)):R("",!0)],64)):R("",!0),i(e.$slots,"reset-before"),g.value.show?(a(),t($(s(he).DefaultButton),P({key:1,type:"button",onClick:w},g.value),{default:r(()=>[m(f(g.value.content),1)]),_:1},16)):R("",!0),s(d).actionButtonsReverse?R("",!0):(a(),p(E,{key:2},[i(e.$slots,"submit-before"),_.value.show?(a(),t($(s(he).PrimaryButton),P({key:0,type:"button",onClick:x},_.value),{default:r(()=>[m(f(_.value.content),1)]),_:1},16)):R("",!0)],64)),i(e.$slots,"expand-before"),s(d).showCollapseButton?(a(),t(s(Pe),{key:3,class:"ml-[-0.3em]","model-value":y.value,"onUpdate:modelValue":n[0]||(n[0]=e=>y.value=e)},{default:r(()=>[h("span",null,f(y.value?s(o)("expand"):s(o)("collapse")),1)]),_:1},8,["model-value"])):R("",!0),i(e.$slots,"expand-after")],2))}}),Ea=e=>null!==e&&!!e&&"object"==typeof e&&!Array.isArray(e);function $a(e){return Number(e)>=0}function Pa(e){if(!function(e){return"object"==typeof e&&null!==e}(e)||"[object Object]"!==function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Ia(e,t){return Object.keys(t).forEach(a=>{if(Pa(t[a])&&Pa(e[a]))return e[a]||(e[a]={}),void Ia(e[a],t[a]);e[a]=t[a]}),e}function Va(e,t){return{__type:"VVTypedSchema",async parse(a){const s=await e.safeParseAsync(a,t);if(s.success)return{value:s.data,errors:[]};const n={};return Ma(s.error.issues,n),{errors:Object.values(n)}},cast(t){try{return e.parse(t)}catch(a){const s=La(e);return Ea(s)&&Ea(t)?Ia(s,t):t}},describe(t){try{if(!t)return{required:!e.isOptional(),exists:!0};const a=function(e,t){if(!Da(t))return null;if(me(e))return t.shape[fe(e)];const a=(e||"").split(/\.|\[(\d+)\]/).filter(Boolean);let s=t;for(let n=0;n<=a.length;n++){const e=a[n];if(!e||!s)return s;Da(s)?s=s.shape[e]||null:$a(e)&&za(s)&&(s=s._def.type)}return null}(t,e);return a?{required:!a.isOptional(),exists:!0}:{required:!1,exists:!1}}catch(a){return{required:!1,exists:!1}}}}}function Ma(e,t){e.forEach(e=>{const a=function(e){const t=e.split(".");if(!t.length)return"";let a=String(t[0]);for(let s=1;s<t.length;s++)$a(t[s])?a+=`[${t[s]}]`:a+=`.${t[s]}`;return a}(e.path.join("."));("invalid_union"!==e.code||(Ma(e.unionErrors.flatMap(e=>e.issues),t),a))&&(t[a]||(t[a]={errors:[],path:a}),t[a].errors.push(e.message))})}function La(e){if(e instanceof Qt)return Object.fromEntries(Object.entries(e.shape).map(([e,t])=>t instanceof ha?[e,t._def.defaultValue()]:t instanceof Qt?[e,La(t)]:[e,void 0]))}function Ba(e){return e._def.typeName}function za(e){return Ba(e)===_a.ZodArray}function Da(e){return Ba(e)===_a.ZodObject}const[qa,Ua]=de("FormRenderProps");function Wa(e){const t=ve(),a=qa().form;if(!t)throw new Error("useDependencies should be used within <VbenForm>");const s=V(!0),n=V(!1),r=V(!0),i=V(!1),o=V({}),l=V(),u=N(()=>(e()?.triggerFields??[]).map(e=>t.value[e]));return F([u,e],async([e,u])=>{if(!u||!u?.triggerFields?.length)return;n.value=!1,s.value=!0,r.value=!0,i.value=!1,l.value=void 0,o.value={};const{componentProps:d,disabled:c,if:p,required:h,rules:m,show:f,trigger:v}=u,y=t.value;if(k(p)){if(s.value=!!(await p(y,a)),!s.value)return}else if(M(p)&&(s.value=p,!s.value))return;if(k(f)){if(r.value=!!(await f(y,a)),!r.value)return}else if(M(f)&&(r.value=f,!r.value))return;k(d)&&(o.value=await d(y,a)),k(m)&&(l.value=await m(y,a)),k(c)?n.value=!!(await c(y,a)):M(c)&&(n.value=c),k(h)&&(i.value=!!(await h(y,a))),k(v)&&await v(y,a)},{deep:!0,immediate:!0}),{dynamicComponentProps:o,dynamicRules:l,isDisabled:n,isIf:s,isRequired:i,isShow:r}}const Ka={key:0,class:"mr-[2px] text-destructive"},Ha={key:2,class:"ml-[2px]"},Ya=e({__name:"form-label",props:{class:{},colon:{type:Boolean},help:{type:[Function,String]},label:{type:[Function,String]},required:{type:Boolean}},setup(e){const n=e;return(d,c)=>(a(),t(s(Se),{class:l(s(u)("flex items-center",n.class))},{default:r(()=>[e.required?(a(),p("span",Ka,"*")):R("",!0),i(d.$slots,"default"),e.help?(a(),t(s($e),{key:1,"trigger-class":"size-3.5 ml-1"},{default:r(()=>[o(s(je),{content:e.help},null,8,["content"])]),_:1})):R("",!0),e.colon&&e.label?(a(),p("span",Ha,":")):R("",!0)]),_:3},8,["class"]))}});function Qa(e){return!e||j(e)?null:"innerType"in e._def?Qa(e._def.innerType):"schema"in e._def?Qa(e._def.schema):e}function Ja(e){if(!e||j(e))return;const t=e;return"ZodDefault"===t._def.typeName?t._def.defaultValue():"innerType"in t._def?Ja(t._def.innerType):"schema"in t._def?Ja(t._def.schema):void 0}function Ga(e){return!(!e||!C(e))&&(Reflect.has(e,"target")&&Reflect.has(e,"stopPropagation"))}const Xa={class:"flex-auto overflow-hidden p-[1px]"},es={key:0,class:"ml-1"},ts=e({__name:"form-field",props:{component:{},componentProps:{type:Function},defaultValue:{},dependencies:{},description:{type:[Function,String]},fieldName:{},help:{type:[Function,String]},hide:{type:Boolean},label:{type:[Function,String]},renderComponentContent:{type:Function},rules:{},suffix:{type:[Function,String]},colon:{type:Boolean},controlClass:{},disabled:{type:Boolean},disabledOnChangeListener:{type:Boolean},disabledOnInputListener:{type:Boolean},emptyStateValue:{},formFieldProps:{},formItemClass:{type:[Function,String]},hideLabel:{type:Boolean},hideRequiredMark:{type:Boolean},labelClass:{},labelWidth:{},modelPropName:{},wrapperClass:{},commonComponentProps:{}},setup(e){const{componentBindEventMap:n,componentMap:d,isVertical:c}=(()=>{const e=qa(),t=N(()=>"vertical"===e.layout),a=N(()=>e.componentMap);return{componentBindEventMap:N(()=>e.componentBindEventMap),componentMap:a,isVertical:t}})(),m=qa(),f=ve(),v=ye(e.fieldName),y=L("fieldComponentRef"),g=m.form,_=N(()=>m.compact),b=N(()=>v.value?.length>0),x=N(()=>{const t=j(e.component)?d.value[e.component]:e.component;return t}),{dynamicComponentProps:w,dynamicRules:T,isDisabled:O,isIf:S,isRequired:A,isShow:Z}=Wa(()=>e.dependencies),E=N(()=>e.labelClass?.includes("w-")||c.value?{}:{width:`${e.labelWidth}px`}),I=N(()=>T.value||e.rules),V=N(()=>!e.hide&&S.value&&Z.value),M=N(()=>{if(!V.value)return!1;if(!I.value)return A.value;if(A.value)return!0;if(j(I.value))return["required","selectRequired"].includes(I.value);let e=I?.value?.isOptional?.();const t=I?.value?._def?.typeName;if("ZodDefault"===t){const t=I?.value?._def.innerType;t&&(e=t.isOptional?.())}return!e}),Y=N(()=>{if(!V.value)return null;let e=I.value;if(!e)return A.value?"required":null;if(j(e))return e;if(!!M.value){const t=e?.unwrap?.();t&&(e=t)}return Va(e)}),Q=N(()=>{const t=k(e.componentProps)?e.componentProps(f.value,g):e.componentProps;return{...e.commonComponentProps,...t,...w.value}});F(()=>Q.value?.autofocus,e=>{!0===e&&H(()=>{y.value&&k(y.value.focus)&&document.activeElement!==y.value&&y.value?.focus?.()})},{immediate:!0});const J=N(()=>O.value||e.disabled||Q.value?.disabled),G=N(()=>k(e.renderComponentContent)?e.renderComponentContent(f.value,g):{}),X=N(()=>Object.keys(G.value)),ee=N(()=>{const t=Y.value;return{keepValue:!0,label:j(e.label)?e.label:"",...t?{rules:t}:{},...e.formFieldProps}});function te(t){const a=function(t){const a=t.componentField.modelValue,s=t.componentField["onUpdate:modelValue"],r=e.modelPropName||(j(e.component)?n.value?.[e.component]:null);let i=a;return a&&C(a)&&r&&(i=Ga(a)?a?.target?.[r]:a?.[r]??a),r?{[`onUpdate:${r}`]:s,[r]:void 0===i?e.emptyStateValue:i,onChange:e.disabledOnChangeListener?void 0:e=>{const a=Ga(e),s=t?.componentField?.onChange;return a?s?.(e?.target?.[r]??e):s?.(e)},...e.disabledOnInputListener?{onInput:void 0}:{}}:{...e.disabledOnInputListener?{onInput:void 0}:{},...e.disabledOnChangeListener?{onChange:void 0}:{}}}(t);return{...t.componentField,...Q.value,...a,...Reflect.has(Q.value,"onChange")?{onChange:Q.value.onChange}:{},...Reflect.has(Q.value,"onInput")?{onInput:Q.value.onInput}:{}}}const ae=Za();return F(y,t=>{ae?.set(e.fieldName,t)}),B(()=>{ae?.has(e.fieldName)&&ae.delete(e.fieldName)}),(n,d)=>!e.hide&&s(S)?(a(),t(s(ge),P({key:0},ee.value,{name:e.fieldName}),{default:r(d=>[z(o(s(Ze),P({class:[{"form-valid-error":b.value,"form-is-required":M.value,"flex-col":s(c),"flex-row items-center":!s(c),"pb-4":!_.value,"pb-2":_.value},"relative flex"]},n.$attrs),{default:r(()=>[e.hideLabel?R("",!0):(a(),t(Ya,{key:0,class:l(s(u)("flex leading-6",{"mr-2 flex-shrink-0 justify-end":!s(c),"mb-1 flex-row":s(c)},e.labelClass)),help:e.help,colon:e.colon,label:e.label,required:M.value&&!e.hideRequiredMark,style:D(E.value)},{default:r(()=>[e.label?(a(),t(s(je),{key:0,content:e.label},null,8,["content"])):R("",!0)]),_:1},8,["class","help","colon","label","required","style"])),h("div",Xa,[h("div",{class:l(s(u)("relative flex w-full items-center",e.wrapperClass))},[o(s(Ae),{class:l(s(u)(e.controlClass))},{default:r(()=>[i(n.$slots,"default",W(K({...d,...te(d),disabled:J.value,isInValid:b.value})),()=>[(a(),t($(x.value),P({ref_key:"fieldComponentRef",ref:y,class:{"border-destructive hover:border-destructive/80 focus:border-destructive focus:shadow-[0_0_0_2px_rgba(255,38,5,0.06)]":b.value}},te(d),{disabled:J.value}),q({_:2},[U(X.value,e=>({name:e,fn:r(t=>[o(s(je),P({content:G.value[e]},{...t,formContext:d}),null,16,["content"])])}))]),1040,["class","disabled"])),_.value&&b.value?(a(),t(s(le),{key:0,"delay-duration":300,side:"left"},{trigger:r(()=>[i(n.$slots,"trigger",{},()=>[o(s(Fe),{class:l(s(u)("inline-flex size-5 cursor-pointer text-foreground/80 hover:text-foreground"))},null,8,["class"])])]),default:r(()=>[o(s(Ee))]),_:3})):R("",!0)])]),_:2},1032,["class"]),e.suffix?(a(),p("div",es,[o(s(je),{content:e.suffix},null,8,["content"])])):R("",!0),e.description?(a(),t(s(Ne),{key:1,class:"ml-1"},{default:r(()=>[o(s(je),{content:e.description},null,8,["content"])]),_:1})):R("",!0)],2),_.value?R("",!0):(a(),t(be,{key:0,name:"slide-up"},{default:r(()=>[o(s(Ee),{class:"absolute"})]),_:1}))])]),_:2},1040,["class"]),[[_e,s(Z)]])]),_:3},16,["name"])):R("",!0)}});const as=e({__name:"form",props:{arrayToStringFields:{},collapsed:{type:Boolean},collapsedRows:{default:1},collapseTriggerResize:{type:Boolean},commonConfig:{default:()=>({})},compact:{type:Boolean},componentBindEventMap:{},componentMap:{},fieldMappingTime:{},form:{},layout:{},schema:{},showCollapseButton:{type:Boolean,default:!1},wrapperClass:{default:"grid-cols-1 sm:grid-cols-2 md:grid-cols-3"},globalCommonConfig:{default:()=>({})}},emits:["submit"],setup(e,{emit:s}){const n=e,o=s,d=N(()=>{const e=["flex"];return"inline"===n.layout?e.push("flex-wrap gap-x-2"):e.push(n.compact?"gap-x-2":"gap-x-4","flex-col grid"),u(...e,n.wrapperClass)});Ua(n);const{isCalculated:c,keepFormItemIndex:m,wrapperRef:f}=function(e){const t=L("wrapperRef"),a=Y(t),s=V({}),n=V(!1),r=J(G),i=N(()=>{const t=e.collapsedRows??1,a=s.value;let n=0;for(let e=1;e<=t;e++)n+=a?.[e]??0;return n-1||1});async function o(){if(!e.showCollapseButton)return;if(await H(),!t.value)return;const a=[...t.value.children],r=t.value,i=window.getComputedStyle(r).getPropertyValue("grid-template-rows").split(" "),o=r?.getBoundingClientRect();a.forEach(t=>{const a=t.getBoundingClientRect().top-o.top;let r=0,l=0;for(const[e,s]of i.entries())if(l+=Number.parseFloat(s),a<l){r=e+1;break}r>(e?.collapsedRows??1)||(s.value[r]=(s.value[r]??0)+1,n.value=!0)})}return F([()=>e.showCollapseButton,()=>r.active().value,()=>e.schema?.length,()=>a.value],async([e])=>{e&&(await H(),s.value={},n.value=!1,await o())}),Q(()=>{o()}),{isCalculated:n,keepFormItemIndex:i,wrapperRef:t}}(n),v=N(()=>{const e=[];return n.schema?.forEach(t=>{const{fieldName:a}=t,s=t.rules;let n="";s&&!j(s)&&(n=s._def.typeName);const r=Qa(s);e.push({default:Ja(s),fieldName:a,required:!["ZodNullable","ZodOptional"].includes(n),rules:r})}),e}),y=N(()=>n.form?"form":ke),g=N(()=>n.form?{onSubmit:n.form.handleSubmit(e=>o("submit",e))}:{onSubmit:e=>o("submit",e)}),_=N(()=>n.collapsed&&c.value),b=N(()=>{const{colon:e=!1,componentProps:t={},controlClass:a="",disabled:s,disabledOnChangeListener:r=!0,disabledOnInputListener:i=!0,emptyStateValue:o,formFieldProps:l={},formItemClass:d="",hideLabel:c=!1,hideRequiredMark:p=!1,labelClass:h="",labelWidth:f=100,modelPropName:v="",wrapperClass:y=""}=x(n.commonConfig,n.globalCommonConfig);return(n.schema||[]).map((g,b)=>{const x=m.value,w=!!(n.showCollapseButton&&_.value&&x)&&x<=b;let C=g.formItemClass;if(k(g.formItemClass))try{C=g.formItemClass()}catch(T){C=""}return{colon:e,disabled:s,disabledOnChangeListener:r,disabledOnInputListener:i,emptyStateValue:o,hideLabel:c,hideRequiredMark:p,labelWidth:f,modelPropName:v,wrapperClass:y,...g,commonComponentProps:t,componentProps:g.componentProps,controlClass:u(a,g.controlClass),formFieldProps:{...l,...g.formFieldProps},formItemClass:u("flex-shrink-0",{hidden:w},d,C),labelClass:u(h,g.labelClass)}})});return(e,s)=>(a(),t($(y.value),W(K(g.value)),{default:r(()=>[h("div",{ref_key:"wrapperRef",ref:f,class:l(d.value)},[(a(!0),p(E,null,U(b.value,s=>(a(),t(ts,P({key:s.fieldName,ref_for:!0},s,{class:s.formItemClass,rules:s.rules}),{default:r(t=>[i(e.$slots,s.fieldName,P({ref_for:!0},t))]),_:2},1040,["class","rules"]))),128)),i(e.$slots,"default",{shapes:v.value})],2)]),_:3},16))}}),ss=e({__name:"vben-use-form",props:{formApi:{},actionButtonsReverse:{type:Boolean},actionLayout:{},actionPosition:{},actionWrapperClass:{},arrayToStringFields:{},fieldMappingTime:{},handleCollapsedChange:{type:Function},handleReset:{type:Function},handleSubmit:{type:Function},handleValuesChange:{type:Function},resetButtonOptions:{},scrollToFirstError:{type:Boolean},showDefaultActions:{type:Boolean},submitButtonOptions:{},submitOnChange:{type:Boolean},submitOnEnter:{type:Boolean},collapsed:{type:Boolean},collapsedRows:{},collapseTriggerResize:{type:Boolean},commonConfig:{},compact:{type:Boolean},layout:{},schema:{},showCollapseButton:{type:Boolean},wrapperClass:{}},setup(e){const n=e,o=n.formApi?.useStore?.(),l=xe(n,o),u=new Map,{delegatedSlots:d,form:c}=Fa(l);Na([l,c]),ja(u),n.formApi?.mount?.(c,u);const p=e=>{n.formApi?.setState({collapsed:e}),l.value.handleCollapsedChange?.(e)};function h(e){o?.value.submitOnEnter&&l.value.formApi?.isMounted&&(e.target instanceof HTMLTextAreaElement||(e.preventDefault(),l.value.formApi?.validateAndSubmitForm()))}const m=ae(async()=>{o?.value.submitOnChange&&l.value.formApi?.validateAndSubmitForm()},300),f={};return Q(async()=>{await H(),F(()=>c.values,async e=>{if(l.value.handleValuesChange){const t=o?.value.schema?.map(e=>e.fieldName);if(t&&t.length>0){const a=[];if(t.forEach(t=>{const s=X(e,t),n=X(f,t);ee(s,n)||(a.push(t),Z(f,t,s))}),a.length>0){const e=await(l.value.formApi?.getValues());l.value.handleValuesChange(te(e??{}),a)}}}m()},{deep:!0})}),(e,n)=>(a(),t(s(as),P({onKeydown:Te(h,["enter"])},s(l),{collapsed:s(o)?.collapsed,"component-bind-event-map":s(Ce),"component-map":s(he),form:s(c),"global-common-config":s(we)}),q({default:r(n=>[i(e.$slots,"default",W(K(n)),()=>[s(l).showDefaultActions?(a(),t(Ra,{key:0,"model-value":s(o)?.collapsed,"onUpdate:modelValue":p},{"reset-before":r(t=>[i(e.$slots,"reset-before",W(K(t)))]),"submit-before":r(t=>[i(e.$slots,"submit-before",W(K(t)))]),"expand-before":r(t=>[i(e.$slots,"expand-before",W(K(t)))]),"expand-after":r(t=>[i(e.$slots,"expand-after",W(K(t)))]),_:3},8,["model-value"])):R("",!0)])]),_:2},[U(s(d),t=>({name:t,fn:r(a=>[i(e.$slots,t,W(K(a)))])}))]),1040,["collapsed","component-bind-event-map","component-map","form","global-common-config"]))}});function ns(t){const a=se(t),s=new Be(t),n=s;n.useStore=e=>Me(s.store,e);const r=e((e,{attrs:t,slots:a})=>(ne(()=>{s.unmount()}),s.setState({...e,...t}),()=>re(ss,{...e,...t,formApi:n},a)),{name:"VbenUseForm",inheritAttrs:!1});return a&&F(()=>t.schema,()=>{s.setState({schema:t.schema})},{immediate:!0}),[r,n]}export{Fe as C,Le as S,$e as _,Re as a,xa as b,Me as c,ka as s,ns as u};
