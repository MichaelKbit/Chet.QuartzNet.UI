import{_ as e,e as a,y as l,k as o,l as t,P as n,a as r,v as u,w as i,f as s,g as d,b as v}from"./bootstrap.js";import{V as p}from"./Checkbox.js";import{u as c,F as m}from"./FormItemContext.js";import{u as f}from"./index30.js";import{a3 as b,E as h,a8 as g,aa as k,N as x,ac as y,L as C,p as O,U as S,a4 as w}from"../app.js";import"node:module";import"node:os";import"node:fs";import"node:url";import"node:assert";import"node:process";import"node:path";import"node:v8";import"node:util";import"node:crypto";import"node:tty";import"node:perf_hooks";import"node:vm";const M=()=>e(e({},{name:String,prefixCls:String,options:l([]),disabled:Boolean,id:String}),{defaultValue:l(),value:l(),onChange:a(),"onUpdate:value":a()}),j=()=>e(e({},{prefixCls:String,defaultChecked:o(),checked:o(),disabled:o(),isGroup:o(),value:n.any,name:String,id:String,indeterminate:o(),type:t("checkbox"),autofocus:o(),onChange:a(),"onUpdate:checked":a(),onClick:a(),skipGroup:o(!1)}),{indeterminate:o(!1)}),I=Symbol("CheckboxGroupContext");var V=function(e,a){var l={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&a.indexOf(o)<0&&(l[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(o=Object.getOwnPropertySymbols(e);t<o.length;t++)a.indexOf(o[t])<0&&Object.prototype.propertyIsEnumerable.call(e,o[t])&&(l[o[t]]=e[o[t]])}return l};const $=b({compatConfig:{MODE:3},name:"ACheckbox",inheritAttrs:!1,__ANT_CHECKBOX:!0,props:j(),setup(a,l){let{emit:o,attrs:t,slots:n,expose:b}=l;const S=c(),w=m.useInject(),{prefixCls:M,direction:j,disabled:$}=r("checkbox",a),G=u(),[A,E]=f(M),F=x(I,void 0),_=Symbol("checkboxUniId"),P=h(()=>(null==F?void 0:F.disabled.value)||$.value);g(()=>{!a.skipGroup&&F&&F.registerValue(_,a.value)}),k(()=>{F&&F.cancelValue(_)}),y(()=>{i(!(void 0===a.checked&&!F&&void 0!==a.value))});const U=e=>{const a=e.target.checked;o("update:checked",a),o("change",e),S.onFieldChange()},B=C();return b({focus:()=>{var e;null===(e=B.value)||void 0===e||e.focus()},blur:()=>{var e;null===(e=B.value)||void 0===e||e.blur()}}),()=>{var l;const r=s(null===(l=n.default)||void 0===l?void 0:l.call(n)),{indeterminate:u,skipGroup:i,id:c=S.id.value}=a,m=V(a,["indeterminate","skipGroup","id"]),{onMouseenter:f,onMouseleave:b,onInput:h,class:g,style:k}=t,x=V(t,["onMouseenter","onMouseleave","onInput","class","style"]),y=e(e(e(e({},m),{id:c,prefixCls:M.value}),x),{disabled:P.value});F&&!i?(y.onChange=function(){for(var e=arguments.length,l=new Array(e),t=0;t<e;t++)l[t]=arguments[t];o("change",...l),F.toggleOption({label:r,value:a.value})},y.name=F.name.value,y.checked=F.mergedValue.value.includes(a.value),y.disabled=P.value||G.value,y.indeterminate=u):y.onChange=U;const C=d({[`${M.value}-wrapper`]:!0,[`${M.value}-rtl`]:"rtl"===j.value,[`${M.value}-wrapper-checked`]:y.checked,[`${M.value}-wrapper-disabled`]:y.disabled,[`${M.value}-wrapper-in-form-item`]:w.isFormItemInput},g,E.value),I=d({[`${M.value}-indeterminate`]:u},E.value);return A(O("label",{class:C,style:k,onMouseenter:f,onMouseleave:b},[O(p,v(v({"aria-checked":u?"mixed":void 0},y),{},{class:I,ref:B}),null),r.length?O("span",null,[r]):null]))}}}),G=b({compatConfig:{MODE:3},name:"ACheckboxGroup",inheritAttrs:!1,props:M(),setup(e,a){let{slots:l,attrs:o,emit:t,expose:n}=a;const u=c(),{prefixCls:i,direction:s}=r("checkbox",e),d=h(()=>`${i.value}-group`),[p,m]=f(d),b=C((void 0===e.value?e.defaultValue:e.value)||[]);S(()=>e.value,()=>{b.value=e.value||[]});const g=h(()=>e.options.map(e=>"string"==typeof e||"number"==typeof e?{label:e,value:e}:e)),k=C(Symbol()),x=C(new Map),y=C(new Map);S(k,()=>{const e=new Map;for(const a of x.value.values())e.set(a,!0);y.value=e});return w(I,{cancelValue:e=>{x.value.delete(e),k.value=Symbol()},registerValue:(e,a)=>{x.value.set(e,a),k.value=Symbol()},toggleOption:a=>{const l=b.value.indexOf(a.value),o=[...b.value];-1===l?o.push(a.value):o.splice(l,1),void 0===e.value&&(b.value=o);const n=o.filter(e=>y.value.has(e)).sort((e,a)=>g.value.findIndex(a=>a.value===e)-g.value.findIndex(e=>e.value===a));t("update:value",n),t("change",n),u.onFieldChange()},mergedValue:b,name:h(()=>e.name),disabled:h(()=>e.disabled)}),n({mergedValue:b}),()=>{var a;const{id:t=u.id.value}=e;let n=null;return g.value&&g.value.length>0&&(n=g.value.map(a=>{var o;return O($,{prefixCls:i.value,key:a.value.toString(),disabled:"disabled"in a?a.disabled:e.disabled,indeterminate:a.indeterminate,value:a.value,checked:-1!==b.value.indexOf(a.value),onChange:a.onChange,class:`${d.value}-item`},{default:()=>[void 0!==l.label?null===(o=l.label)||void 0===o?void 0:o.call(l,a):a.label]})})),p(O("div",v(v({},o),{},{class:[d.value,{[`${d.value}-rtl`]:"rtl"===s.value},o.class,m.value],id:t}),[n||(null===(a=l.default)||void 0===a?void 0:a.call(l))]))}}});$.Group=G,$.install=function(e){return e.component($.name,$),e.component(G.name,G),e};export{G as CheckboxGroup,M as checkboxGroupProps,j as checkboxProps,$ as default};
