import{b5 as e,b4 as t,b6 as a}from"./bootstrap.js";import{T as o}from"./auth-title.js";import{a3 as n,P as s,E as i,aq as r,ak as l,p as m,aA as u,al as p,am as c,ay as d,az as h,ab as f,aS as g,L as b,f as w,aj as _}from"../app.js";import{u as v,s as T,b as P}from"./use-vben-form.js";import"node:module";import"node:os";import"node:fs";import"node:url";import"node:assert";import"node:process";import"node:path";import"node:v8";import"node:util";import"node:crypto";import"node:tty";import"node:perf_hooks";import"node:vm";import"./FormLabel.vue_vue_type_script_setup_true_lang.js";import"./render-content.vue_vue_type_script_lang.js";const y={class:"mt-4 text-center text-sm"},x=n({name:"RegisterForm",__name:"register",props:{formSchema:{default:()=>[]},loading:{type:Boolean,default:!1},loginPath:{default:"/auth/login"},title:{default:""},subTitle:{default:""},submitButtonText:{default:""}},emits:["submit"],setup(n,{expose:b,emit:w}){const _=n,T=w,[P,x]=v(s({commonConfig:{hideLabel:!0,hideRequiredMark:!0},schema:i(()=>_.formSchema),showDefaultActions:!1})),k=e();async function C(){const{valid:e}=await x.validate(),t=await x.getValues();e&&T("submit",t)}return b({getFormApi:()=>x}),(e,s)=>(l(),r("div",null,[m(o,null,{desc:p(()=>[c(e.$slots,"subTitle",{},()=>[d(h(n.subTitle||f(t)("authentication.signUpSubtitle")),1)])]),default:p(()=>[c(e.$slots,"title",{},()=>[d(h(n.title||f(t)("authentication.createAnAccount"))+" ðŸš€ ",1)])]),_:3}),m(f(P)),m(f(a),{class:g([{"cursor-wait":n.loading},"mt-2 w-full"]),loading:n.loading,"aria-label":"register",onClick:C},{default:p(()=>[c(e.$slots,"submitButtonText",{},()=>[d(h(n.submitButtonText||f(t)("authentication.signUp")),1)])]),_:3},8,["class","loading"]),u("div",y,[d(h(f(t)("authentication.alreadyHaveAccount"))+" ",1),u("span",{class:"vben-link text-sm font-normal",onClick:s[0]||(s[0]=e=>{k.push(_.loginPath)})},h(f(t)("authentication.goToLogin")),1)])]))}}),k=n({name:"Register",__name:"register",setup(e){const a=b(!1),o=i(()=>[{component:"VbenInput",componentProps:{placeholder:t("authentication.usernameTip")},fieldName:"username",label:t("authentication.username"),rules:T().min(1,{message:t("authentication.usernameTip")})},{component:"VbenInputPassword",componentProps:{passwordStrength:!0,placeholder:t("authentication.password")},fieldName:"password",label:t("authentication.password"),renderComponentContent:()=>({strengthText:()=>t("authentication.passwordStrength")}),rules:T().min(1,{message:t("authentication.passwordTip")})},{component:"VbenInputPassword",componentProps:{placeholder:t("authentication.confirmPassword")},dependencies:{rules(e){const{password:a}=e;return T({required_error:t("authentication.passwordTip")}).min(1,{message:t("authentication.passwordTip")}).refine(e=>e===a,{message:t("authentication.confirmPasswordTip")})},triggerFields:["password"]},fieldName:"confirmPassword",label:t("authentication.confirmPassword")},{component:"VbenCheckbox",fieldName:"agreePolicy",renderComponentContent:()=>({default:()=>w("span",[t("authentication.agree"),w("a",{class:"vben-link ml-1 ",href:""},`${t("authentication.privacyPolicy")} & ${t("authentication.terms")}`)])}),rules:P().refine(e=>!!e,{message:t("authentication.agreeTip")})}]);function n(e){}return(e,t)=>(l(),_(f(x),{"form-schema":o.value,loading:a.value,onSubmit:n},null,8,["form-schema","loading"]))}});export{k as default};
