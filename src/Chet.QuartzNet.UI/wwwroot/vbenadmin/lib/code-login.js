import{b5 as t,b4 as e,b6 as o}from"./bootstrap.js";import{T as a}from"./auth-title.js";import{u as n,s as i}from"./use-vben-form.js";import{a3 as s,P as l,E as m,aq as u,ak as r,p as c,aj as d,ao as p,al as h,am as f,ay as b,az as g,ab as _,aA as v,aS as T,L as k}from"../app.js";import"./FormLabel.vue_vue_type_script_setup_true_lang.js";import"./render-content.vue_vue_type_script_lang.js";import"node:module";import"node:os";import"node:fs";import"node:url";import"node:assert";import"node:process";import"node:path";import"node:v8";import"node:util";import"node:crypto";import"node:tty";import"node:perf_hooks";import"node:vm";const y={class:"text-muted-foreground"},w=s({name:"AuthenticationCodeLogin",__name:"code-login",props:{formSchema:{},loading:{type:Boolean,default:!1},loginPath:{default:"/auth/login"},title:{default:""},subTitle:{default:""},submitButtonText:{default:""},showBack:{type:Boolean,default:!0}},emits:["submit"],setup(i,{expose:s,emit:k}){const w=i,x=k,B=t(),[j,C]=n(l({commonConfig:{hideLabel:!0,hideRequiredMark:!0},schema:m(()=>w.formSchema),showDefaultActions:!1}));async function L(){const{valid:t}=await C.validate(),e=await C.getValues();t&&x("submit",e)}return s({getFormApi:()=>C}),(t,n)=>(r(),u("div",null,[c(a,null,{desc:h(()=>[v("span",y,[f(t.$slots,"subTitle",{},()=>[b(g(i.subTitle||_(e)("authentication.codeSubtitle")),1)])])]),default:h(()=>[f(t.$slots,"title",{},()=>[b(g(i.title||_(e)("authentication.welcomeBack"))+" ðŸ“² ",1)])]),_:3}),c(_(j)),c(_(o),{class:T([{"cursor-wait":i.loading},"w-full"]),loading:i.loading,onClick:L},{default:h(()=>[f(t.$slots,"submitButtonText",{},()=>[b(g(i.submitButtonText||_(e)("common.login")),1)])]),_:3},8,["class","loading"]),i.showBack?(r(),d(_(o),{key:0,class:"mt-4 w-full",variant:"outline",onClick:n[0]||(n[0]=t=>{B.push(w.loginPath)})},{default:h(()=>[b(g(_(e)("common.back")),1)]),_:1})):p("",!0)]))}}),x=s({name:"CodeLogin",__name:"code-login",setup(t){const o=k(!1),a=m(()=>[{component:"VbenInput",componentProps:{placeholder:e("authentication.mobile")},fieldName:"phoneNumber",label:e("authentication.mobile"),rules:i().min(1,{message:e("authentication.mobileTip")}).refine(t=>/^\d{11}$/.test(t),{message:e("authentication.mobileErrortip")})},{component:"VbenPinInput",componentProps:{codeLength:6,createText:t=>t>0?e("authentication.sendText",[t]):e("authentication.sendCode"),placeholder:e("authentication.code")},fieldName:"code",label:e("authentication.code"),rules:i().length(6,{message:e("authentication.codeTip",[6])})}]);async function n(t){}return(t,e)=>(r(),d(_(w),{"form-schema":a.value,loading:o.value,onSubmit:n},null,8,["form-schema","loading"]))}});export{x as default};
