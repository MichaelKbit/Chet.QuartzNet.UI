import{P as e,b as t,g as l,_ as n}from"./bootstrap.js";import{R as a}from"./BaseInput.js";import{a3 as r,N as o,E as u,a4 as i,L as s,ae as v,p,a5 as d,U as c}from"../app.js";const m=Symbol("OverflowContextProviderKey"),f=r({compatConfig:{MODE:3},name:"OverflowContextProvider",inheritAttrs:!1,props:{value:{type:Object}},setup(e,t){let{slots:l}=t;return i(m,u(()=>e.value)),()=>{var e;return null===(e=l.default)||void 0===e?void 0:e.call(l)}}});const y=void 0,b=r({compatConfig:{MODE:3},name:"Item",props:{prefixCls:String,item:e.any,renderItem:Function,responsive:Boolean,itemKey:{type:[String,Number]},registerSize:Function,display:Boolean,order:Number,component:e.any,invalidate:Boolean},setup(e,n){let{slots:r,expose:o}=n;const i=u(()=>e.responsive&&!e.display),d=s();function c(t){e.registerSize(e.itemKey,t)}return o({itemNodeRef:d}),v(()=>{c(null)}),()=>{var n;const{prefixCls:o,invalidate:u,item:s,renderItem:v,responsive:m,registerSize:f,itemKey:b,display:g,order:O,component:x="div"}=e,h=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(l[n[a]]=e[n[a]])}return l}(e,["prefixCls","invalidate","item","renderItem","responsive","registerSize","itemKey","display","order","component"]),S=null===(n=r.default)||void 0===n?void 0:n.call(r),w=v&&s!==y?v(s):S;let C;u||(C={opacity:i.value?0:1,height:i.value?0:y,overflowY:i.value?"hidden":y,order:m?O:y,pointerEvents:i.value?"none":y,position:i.value?"absolute":y});const I={};return i.value&&(I["aria-hidden"]=!0),p(a,{disabled:!m,onResize:e=>{let{offsetWidth:t}=e;c(t)}},{default:()=>p(x,t(t(t({class:l(!u&&o),style:C},I),h),{},{ref:d}),{default:()=>[w]})})}}});var g=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(l[n[a]]=e[n[a]])}return l};const O=r({compatConfig:{MODE:3},name:"RawItem",inheritAttrs:!1,props:{component:e.any,title:e.any,id:String,onMouseenter:{type:Function},onMouseleave:{type:Function},onClick:{type:Function},onKeydown:{type:Function},onFocus:{type:Function},role:String,tabindex:Number},setup(e,n){let{slots:a,attrs:r}=n;const i=o(m,u(()=>null));return()=>{var n;if(!i.value){const{component:l="div"}=e,o=g(e,["component"]);return p(l,t(t({},o),r),{default:()=>[null===(n=a.default)||void 0===n?void 0:n.call(a)]})}const o=i.value,{className:u}=o,s=g(o,["className"]),{class:v}=r,d=g(r,["class"]);return p(f,{value:null},{default:()=>[p(b,t(t(t({class:l(u,v)},s),d),e),a)]})}}});const x="responsive",h="invalidate";function S(e){return`+ ${e.length} ...`}const w=r({name:"Overflow",inheritAttrs:!1,props:{id:String,prefixCls:String,data:Array,itemKey:[String,Number,Function],itemWidth:{type:Number,default:10},renderItem:Function,renderRawItem:Function,maxCount:[Number,String],renderRest:Function,renderRawRest:Function,suffix:e.any,component:String,itemComponent:e.any,onVisibleChange:Function,ssr:String,onMousedown:Function,role:String},emits:["visibleChange"],setup(e,r){let{attrs:o,emit:i,slots:s}=r;const v=u(()=>"full"===e.ssr),m=d(null),y=u(()=>m.value||0),g=d(new Map),O=d(0),w=d(0),C=d(0),I=d(null),E=d(null),F=u(()=>null===E.value&&v.value?Number.MAX_SAFE_INTEGER:E.value||0),N=d(!1),j=u(()=>`${e.prefixCls}-item`),R=u(()=>Math.max(O.value,w.value)),K=u(()=>!(!e.data.length||e.maxCount!==x)),M=u(()=>e.maxCount===h),P=u(()=>K.value||"number"==typeof e.maxCount&&e.data.length>e.maxCount),z=u(()=>{let t=e.data;return K.value?t=null===m.value&&v.value?e.data:e.data.slice(0,Math.min(e.data.length,y.value/e.itemWidth)):"number"==typeof e.maxCount&&(t=e.data.slice(0,e.maxCount)),t}),A=u(()=>K.value?e.data.slice(F.value+1):e.data.slice(z.value.length)),k=(t,l)=>{var n;return"function"==typeof e.itemKey?e.itemKey(t):null!==(n=e.itemKey&&(null==t?void 0:t[e.itemKey]))&&void 0!==n?n:l},$=u(()=>e.renderItem||(e=>e)),_=(t,l)=>{E.value=t,l||(N.value=t<e.data.length-1,i("visibleChange",t))},B=(e,t)=>{m.value=t.clientWidth},D=(e,t)=>{const l=new Map(g.value);null===t?l.delete(e):l.set(e,t),g.value=l},W=(e,t)=>{O.value=w.value,w.value=t},T=(e,t)=>{C.value=t},V=e=>g.value.get(k(z.value[e],e));return c([y,g,w,C,()=>e.itemKey,z],()=>{if(y.value&&R.value&&z.value){let t=C.value;const l=z.value.length,n=l-1;if(!l)return _(0),void(I.value=null);for(let e=0;e<l;e+=1){const l=V(e);if(void 0===l){_(e-1,!0);break}if(t+=l,0===n&&t<=y.value||e===n-1&&t+V(n)<=y.value){_(n),I.value=null;break}if(t+R.value>y.value){_(e-1),I.value=t-l-C.value+w.value;break}}e.suffix&&V(0)+C.value>y.value&&(I.value=null)}}),()=>{const r=N.value&&!!A.value.length,{itemComponent:u,renderRawItem:i,renderRawRest:v,renderRest:d,prefixCls:c="rc-overflow",suffix:m,component:y="div",id:g,onMousedown:O}=e,{class:x,style:h}=o,w=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(l[n[a]]=e[n[a]])}return l}(o,["class","style"]);let C={};null!==I.value&&K.value&&(C={position:"absolute",left:`${I.value}px`,top:0});const E={prefixCls:j.value,responsive:K.value,component:u,invalidate:M.value},R=i?(e,t)=>{const l=k(e,t);return p(f,{key:l,value:n(n({},E),{order:t,item:e,itemKey:l,registerSize:D,display:t<=F.value})},{default:()=>[i(e,t)]})}:(e,l)=>{const n=k(e,l);return p(b,t(t({},E),{},{order:l,key:n,item:e,renderItem:$.value,itemKey:n,registerSize:D,display:l<=F.value}),null)};let _=()=>null;const V={order:r?F.value:Number.MAX_SAFE_INTEGER,className:`${j.value} ${j.value}-rest`,registerSize:W,display:r};if(v)v&&(_=()=>p(f,{value:n(n({},E),V)},{default:()=>[v(A.value)]}));else{const e=d||S;_=()=>p(b,t(t({},E),V),{default:()=>"function"==typeof e?e(A.value):e})}return p(a,{disabled:!K.value,onResize:B},{default:()=>{var n;return p(y,t({id:g,class:l(!M.value&&c,x),style:h,onMousedown:O,role:e.role},w),{default:()=>[z.value.map(R),P.value?_():null,m&&p(b,t(t({},E),{},{order:F.value,class:`${j.value}-suffix`,registerSize:T,display:!0,style:C}),{default:()=>m}),null===(n=s.default)||void 0===n?void 0:n.call(s)]})}})}}});w.Item=O,w.RESPONSIVE=x,w.INVALIDATE=h;export{w as O};
