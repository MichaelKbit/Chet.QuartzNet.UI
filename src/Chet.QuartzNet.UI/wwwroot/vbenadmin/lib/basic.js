import{b3 as e,bz as a,b4 as t,b5 as o,c3 as s,bP as r,cJ as n,b8 as i,b7 as l}from"./bootstrap.js";import{c as u}from"./index32.js";import{_ as p}from"./login.vue_vue_type_script_setup_true_lang.js";import{L as d,ae as m,a6 as c,V as v,_,a3 as h,aY as g,aZ as f,U as y,E as b,aq as w,ak as x,p as k,al as j,ab as L,am as R,bM as P,Z as M,aj as B}from"../app.js";import{_ as T,N as I,a as z,b as A}from"./layout.vue_vue_type_script_setup_true_lang.js";import{u as E}from"./use-modal.js";import{_ as N}from"./avatar.vue_vue_type_script_setup_true_lang.js";import{a as W}from"./use-vben-form.js";import"./index33.js";import"./auth-title.js";import"./render-content.vue_vue_type_script_lang.js";import"node:module";import"node:os";import"node:fs";import"node:url";import"node:assert";import"node:process";import"node:path";import"node:v8";import"node:util";import"node:crypto";import"node:tty";import"node:perf_hooks";import"node:vm";import"./theme-toggle.vue_vue_type_script_setup_true_lang.js";import"./TabsList.vue_vue_type_script_setup_true_lang.js";import"./TabsContent.vue_vue_type_script_setup_true_lang.js";import"./Switch.vue_vue_type_script_setup_true_lang.js";import"./rotate-cw.js";import"./FormLabel.vue_vue_type_script_setup_true_lang.js";const C=e("book-open-text",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]]),S=d(),q=d(!1),V=d({advancedStyle:{colorStops:[{color:"gray",offset:0},{color:"gray",offset:1}],type:"linear"},content:"",contentType:"multi-line-text",globalAlpha:.25,gridLayoutOptions:{cols:2,gap:[20,20],matrix:[[1,0],[0,1]],rows:2},height:200,layout:"grid",rotate:30,width:160});function O(){function e(){S.value&&(S.value.destroy(),S.value=void 0)}return q.value||(q.value=!0,m(()=>{e()})),{destroyWatermark:e,updateWatermark:async function(e){S.value?(await v(),await(S.value?.changeOptions({...V.value,...e}))):await async function(e){const{Watermark:a}=await _(async()=>{const{Watermark:e}=await import("./index.esm.js");return{Watermark:e}},[],import.meta.url);V.value={...V.value,...e},S.value=new a(V.value),await(S.value?.create())}(e)},watermark:c(S)}}const $=h({name:"LoginExpiredModal",__name:"login-expired-modal",props:g({avatar:{default:""},zIndex:{default:0},codeLoginPath:{},forgetPasswordPath:{},loading:{type:Boolean},qrCodeLoginPath:{},registerPath:{},showCodeLogin:{type:Boolean},showForgetPassword:{type:Boolean},showQrcodeLogin:{type:Boolean},showRegister:{type:Boolean},showRememberMe:{type:Boolean},showThirdPartyLogin:{type:Boolean},subTitle:{},title:{},submitButtonText:{}},{open:{type:Boolean},openModifiers:{}}),emits:["update:open"],setup(e){const o=e,s=f(e,"open"),[r,n]=E();y(()=>s.value,e=>{n.setState({isOpen:e})});const i=b(()=>o.zIndex||function(){let e=0;return[...document.querySelectorAll("*")].forEach(a=>{const t=window.getComputedStyle(a).getPropertyValue("z-index");!t||Number.isNaN(Number.parseInt(t))||function(e){return l.some(a=>e.classList.contains(a))}(a)||(e=Math.max(e,Number.parseInt(t)))}),e+1}()),l=["ant-message","loading"];return(o,s)=>(x(),w("div",null,[k(L(r),{closable:!1,"close-on-click-modal":!1,"close-on-press-escape":!1,footer:!1,"fullscreen-button":!1,header:!1,"z-index":i.value,class:"border-none px-10 py-6 text-center shadow-xl sm:w-[600px] sm:rounded-2xl md:h-[unset]"},{default:j(()=>[k(L(N),{src:e.avatar,class:"mx-auto mb-6 size-20"},null,8,["src"]),k(L(a),{"show-forget-password":!1,"show-register":!1,"show-remember-me":!1,"sub-title":L(t)("authentication.loginAgainSubTitle"),title:L(t)("authentication.loginAgainTitle")},{default:j(()=>[R(o.$slots,"default")]),_:3},8,["sub-title","title"])]),_:3},8,["z-index"])]))}}),F=h({__name:"basic",setup(e){const a=d([{id:1,avatar:"https://avatar.vercel.sh/vercel.svg?text=VB",date:"3小时前",isRead:!0,message:"描述信息描述信息描述信息",title:"收到了 14 份新周报"},{id:2,avatar:"https://avatar.vercel.sh/1",date:"刚刚",isRead:!1,message:"描述信息描述信息描述信息",title:"朱偏右 回复了你"},{id:3,avatar:"https://avatar.vercel.sh/1",date:"2024-01-01",isRead:!1,message:"描述信息描述信息描述信息",title:"曲丽丽 评论了你"},{id:4,avatar:"https://avatar.vercel.sh/satori",date:"1天前",isRead:!1,message:"描述信息描述信息描述信息",title:"代办提醒"},{id:5,avatar:"https://avatar.vercel.sh/satori",date:"1天前",isRead:!1,message:"描述信息描述信息描述信息",title:"跳转Workspace示例",link:"/workspace"},{id:6,avatar:"https://avatar.vercel.sh/satori",date:"1天前",isRead:!1,message:"描述信息描述信息描述信息",title:"跳转外部链接示例",link:"https://doc.vben.pro"}]),m=o(),c=s(),v=r(),_=n(),{destroyWatermark:h,updateWatermark:g}=O(),f=b(()=>a.value.some(e=>!e.isRead)),w=b(()=>[{handler:()=>{m.push({name:"Profile"})},icon:"lucide:user",text:t("page.auth.profile")},{handler:()=>{P(i,{target:"_blank"})},icon:C,text:t("ui.widgets.document")},{handler:()=>{P(l,{target:"_blank"})},icon:u,text:"GitHub"},{handler:()=>{P(`${l}/issues`,{target:"_blank"})},icon:W,text:t("ui.widgets.qa")}]),R=b(()=>c.userInfo?.avatar??M.app.defaultAvatar);async function E(){await v.logout(!1)}function N(){a.value=[]}function S(){a.value.forEach(e=>e.isRead=!0)}return y(()=>({enable:M.app.watermark,content:M.app.watermarkContent}),async({enable:e,content:a})=>{e?await g({content:a||`${c.userInfo?.username} - ${c.userInfo?.realName}`}):h()},{immediate:!0}),(e,t)=>(x(),B(L(A),{onClearPreferencesAndLogout:E},{"user-dropdown":j(()=>[k(L(z),{avatar:R.value,menus:w.value,text:L(c).userInfo?.realName,description:"ann.vben@gmail.com","tag-text":"Pro",onLogout:E},null,8,["avatar","menus","text"])]),notification:j(()=>[k(L(I),{dot:f.value,notifications:a.value,onClear:N,onRead:t[0]||(t[0]=e=>e.id&&function(e){const t=a.value.find(a=>a.id===e);t&&(t.isRead=!0)}(e.id)),onRemove:t[1]||(t[1]=e=>{return e.id&&(t=e.id,void(a.value=a.value.filter(e=>e.id!==t)));var t}),onMakeAll:S},null,8,["dot","notifications"])]),extra:j(()=>[k(L($),{open:L(_).loginExpired,"onUpdate:open":t[2]||(t[2]=e=>L(_).loginExpired=e),avatar:R.value},{default:j(()=>[k(p)]),_:1},8,["open","avatar"])]),"lock-screen":j(()=>[k(L(T),{avatar:R.value,onToLogin:E},null,8,["avatar"])]),_:1}))}});export{F as default};
