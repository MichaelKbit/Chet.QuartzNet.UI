import{b6 as e,br as a,at as s,c2 as t}from"./bootstrap.js";import{a3 as o,P as n,E as l,aq as m,ak as r,p as i,ab as u,al as c,ay as p,L as f,ac as b,aj as d}from"../app.js";import{u as v}from"./use-vben-form.js";const g=["onKeydown"],y=o({__name:"base-setting",props:{formSchema:{default:()=>[]}},emits:["submit"],setup(t,{expose:o,emit:f}){const b=t,d=f,[y,h]=v(n({commonConfig:{componentProps:{class:"w-full"}},layout:"horizontal",schema:l(()=>b.formSchema),showDefaultActions:!1}));async function w(){const{valid:e}=await h.validate(),a=await h.getValues();e&&d("submit",a)}return o({getFormApi:()=>h}),(t,o)=>(r(),m("div",{onKeydown:a(s(w,["prevent"]),["enter"])},[i(u(y)),i(u(e),{type:"submit",class:"mt-4",onClick:w},{default:c(()=>[...o[0]||(o[0]=[p(" 更新基本信息 ",-1)])]),_:1})],40,g))}});const h=o({__name:"base-setting",setup(e){const a=f(),s=[{label:"管理员",value:"super"},{label:"用户",value:"user"},{label:"测试",value:"test"}],o=l(()=>[{fieldName:"realName",component:"Input",label:"姓名"},{fieldName:"username",component:"Input",label:"用户名"},{fieldName:"roles",component:"Select",componentProps:{mode:"tags",options:s},label:"角色"},{fieldName:"introduction",component:"Textarea",label:"个人简介"}]);return b(async()=>{const e=await async function(){return t.get("/user/info")}();a.value.getFormApi().setValues(e)}),(e,s)=>(r(),d(u(y),{ref_key:"profileBaseSettingRef",ref:a,"form-schema":o.value},null,8,["form-schema"]))}});export{h as _};
