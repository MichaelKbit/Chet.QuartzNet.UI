import{b6 as s,c4 as e}from"./bootstrap.js";import{a3 as a,P as o,E as t,aq as n,ak as r,p as m,ab as l,al as p,ay as i,L as c,aj as d}from"../app.js";import{u,s as f}from"./use-vben-form.js";const w=a({__name:"password-setting",props:{formSchema:{default:()=>[]}},emits:["submit"],setup(e,{expose:a,emit:c}){const d=e,f=c,[w,b]=u(o({commonConfig:{componentProps:{class:"w-full"}},layout:"horizontal",schema:t(()=>d.formSchema),showDefaultActions:!1}));async function P(){const{valid:s}=await b.validate(),e=await b.getValues();s&&f("submit",e)}return a({getFormApi:()=>b}),(e,a)=>(r(),n("div",null,[m(l(w)),m(l(s),{type:"submit",class:"mt-4",onClick:P},{default:p(()=>[...a[0]||(a[0]=[i(" 更新密码 ",-1)])]),_:1})]))}}),b=a({__name:"password-setting",setup(s){const a=c(),o=t(()=>[{fieldName:"oldPassword",label:"旧密码",component:"VbenInputPassword",componentProps:{placeholder:"请输入旧密码"}},{fieldName:"newPassword",label:"新密码",component:"VbenInputPassword",componentProps:{passwordStrength:!0,placeholder:"请输入新密码"}},{fieldName:"confirmPassword",label:"确认密码",component:"VbenInputPassword",componentProps:{passwordStrength:!0,placeholder:"请再次输入新密码"},dependencies:{rules(s){const{newPassword:e}=s;return f({required_error:"请再次输入新密码"}).min(1,{message:"请再次输入新密码"}).refine(s=>s===e,{message:"两次输入的密码不一致"})},triggerFields:["newPassword"]}}]);function n(){e.success("密码修改成功")}return(s,e)=>(r(),d(l(w),{ref_key:"profilePasswordSettingRef",ref:a,class:"w-1/3","form-schema":o.value,onSubmit:n},null,8,["form-schema"]))}});export{b as _};
