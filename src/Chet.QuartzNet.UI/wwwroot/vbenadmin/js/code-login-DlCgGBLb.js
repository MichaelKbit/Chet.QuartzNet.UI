var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,s=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&l(e,a,t[a]);if(o)for(var a of o(t))i.call(t,a)&&l(e,a,t[a]);return e},r=(e,o)=>t(e,a(o)),u=(e,t,a)=>new Promise((o,n)=>{var i=e=>{try{s(a.next(e))}catch(t){n(t)}},l=e=>{try{s(a.throw(e))}catch(t){n(t)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,l);s((a=a.apply(e,t)).next())});import{b1 as c,b0 as m,b2 as p}from"./bootstrap-Dknk63fm.js";import{T as d}from"./auth-title-DvjaOEJC.js";import{u as h,s as b}from"./use-vben-form-Cffh3qgp.js";import{a1 as f,P as g,E as v,ap as y,aj as _,p as j,ai as w,an as x,ak as P,al as T,ax as k,ay as O,a9 as B,az as C,aR as L,L as S}from"../jse/index-index-BjsohvV2.js";import"./FormLabel.vue_vue_type_script_setup_true_lang-CKyOmHKZ.js";import"./render-content.vue_vue_type_script_lang-DYk6QFkF.js";const E={class:"text-muted-foreground"},$=f(r(s({},{name:"AuthenticationCodeLogin"}),{__name:"code-login",props:{formSchema:{},loading:{type:Boolean,default:!1},loginPath:{default:"/auth/login"},title:{default:""},subTitle:{default:""},submitButtonText:{default:""},showBack:{type:Boolean,default:!0}},emits:["submit"],setup(e,{expose:t,emit:a}){const o=e,n=a,i=c(),[l,s]=h(g({commonConfig:{hideLabel:!0,hideRequiredMark:!0},schema:v(()=>o.formSchema),showDefaultActions:!1}));function r(){return u(this,null,function*(){const{valid:e}=yield s.validate(),t=yield s.getValues();e&&n("submit",t)})}return t({getFormApi:()=>s}),(t,a)=>(_(),y("div",null,[j(d,null,{desc:P(()=>[C("span",E,[T(t.$slots,"subTitle",{},()=>[k(O(e.subTitle||B(m)("authentication.codeSubtitle")),1)])])]),default:P(()=>[T(t.$slots,"title",{},()=>[k(O(e.title||B(m)("authentication.welcomeBack"))+" ðŸ“² ",1)])]),_:3}),j(B(l)),j(B(p),{class:L([{"cursor-wait":e.loading},"w-full"]),loading:e.loading,onClick:r},{default:P(()=>[T(t.$slots,"submitButtonText",{},()=>[k(O(e.submitButtonText||B(m)("common.login")),1)])]),_:3},8,["class","loading"]),e.showBack?(_(),w(B(p),{key:0,class:"mt-4 w-full",variant:"outline",onClick:a[0]||(a[0]=e=>{i.push(o.loginPath)})},{default:P(()=>[k(O(B(m)("common.back")),1)]),_:1})):x("",!0)]))}})),A=f(r(s({},{name:"CodeLogin"}),{__name:"code-login",setup(e){const t=S(!1),a=v(()=>[{component:"VbenInput",componentProps:{placeholder:m("authentication.mobile")},fieldName:"phoneNumber",label:m("authentication.mobile"),rules:b().min(1,{message:m("authentication.mobileTip")}).refine(e=>/^\d{11}$/.test(e),{message:m("authentication.mobileErrortip")})},{component:"VbenPinInput",componentProps:{codeLength:6,createText:e=>e>0?m("authentication.sendText",[e]):m("authentication.sendCode"),placeholder:m("authentication.code")},fieldName:"code",label:m("authentication.code"),rules:b().length(6,{message:m("authentication.codeTip",[6])})}]);function o(e){return u(this,null,function*(){console.log(e)})}return(e,n)=>(_(),w(B($),{"form-schema":a.value,loading:t.value,onSubmit:o},null,8,["form-schema","loading"]))}}));export{A as default};
