import{b2 as e,c6 as s}from"./bootstrap-Dknk63fm.js";import{a1 as o,P as a,E as n,ap as r,aj as t,p as l,a9 as m,ak as i,ax as p,L as c,ai as d}from"../jse/index-index-BjsohvV2.js";import{u,s as f}from"./use-vben-form-Cffh3qgp.js";const w=o({__name:"password-setting",props:{formSchema:{default:()=>[]}},emits:["submit"],setup(s,{expose:o,emit:c}){const d=s,f=c,[w,h]=u(a({commonConfig:{componentProps:{class:"w-full"}},layout:"horizontal",schema:n(()=>d.formSchema),showDefaultActions:!1}));function P(){return e=this,s=null,o=function*(){const{valid:e}=yield h.validate(),s=yield h.getValues();e&&f("submit",s)},new Promise((a,n)=>{var r=e=>{try{l(o.next(e))}catch(s){n(s)}},t=e=>{try{l(o.throw(e))}catch(s){n(s)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,t);l((o=o.apply(e,s)).next())});var e,s,o}return o({getFormApi:()=>h}),(s,o)=>(t(),r("div",null,[l(m(w)),l(m(e),{type:"submit",class:"mt-4",onClick:P},{default:i(()=>[...o[0]||(o[0]=[p(" 更新密码 ",-1)])]),_:1})]))}}),h=o({__name:"password-setting",setup(e){const o=c(),a=n(()=>[{fieldName:"oldPassword",label:"旧密码",component:"VbenInputPassword",componentProps:{placeholder:"请输入旧密码"}},{fieldName:"newPassword",label:"新密码",component:"VbenInputPassword",componentProps:{passwordStrength:!0,placeholder:"请输入新密码"}},{fieldName:"confirmPassword",label:"确认密码",component:"VbenInputPassword",componentProps:{passwordStrength:!0,placeholder:"请再次输入新密码"},dependencies:{rules(e){const{newPassword:s}=e;return f({required_error:"请再次输入新密码"}).min(1,{message:"请再次输入新密码"}).refine(e=>e===s,{message:"两次输入的密码不一致"})},triggerFields:["newPassword"]}}]);function r(){s.success("密码修改成功")}return(e,s)=>(t(),d(m(w),{ref_key:"profilePasswordSettingRef",ref:o,class:"w-1/3","form-schema":a.value,onSubmit:r},null,8,["form-schema"]))}});export{h as _};
