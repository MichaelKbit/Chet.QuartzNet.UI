var c=(m,s,t)=>new Promise((r,o)=>{var l=e=>{try{n(t.next(e))}catch(a){o(a)}},i=e=>{try{n(t.throw(e))}catch(a){o(a)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,i);n((t=t.apply(m,s)).next())});import{b2 as b,bs as h,aq as g,c4 as v}from"./bootstrap-SVCeOZ28.js";import{a1 as f,P as w,E as d,ap as y,aj as _,p,a9 as u,ak as S,ax as x,L as N,aa as k,ai as C}from"../jse/index-index-Bt_MP_ox.js";import{u as A}from"./use-vben-form-C7HFiPQQ.js";const B=["onKeydown"],V=f({__name:"base-setting",props:{formSchema:{default:()=>[]}},emits:["submit"],setup(m,{expose:s,emit:t}){const r=m,o=t,[l,i]=A(w({commonConfig:{componentProps:{class:"w-full"}},layout:"horizontal",schema:d(()=>r.formSchema),showDefaultActions:!1}));function n(){return c(this,null,function*(){const{valid:e}=yield i.validate(),a=yield i.getValues();e&&o("submit",a)})}return s({getFormApi:()=>i}),(e,a)=>(_(),y("div",{onKeydown:h(g(n,["prevent"]),["enter"])},[p(u(l)),p(u(b),{type:"submit",class:"mt-4",onClick:n},{default:S(()=>[...a[0]||(a[0]=[x(" 更新基本信息 ",-1)])]),_:1})],40,B))}});function F(){return c(this,null,function*(){return v.get("/user/info")})}const E=f({__name:"base-setting",setup(m){const s=N(),t=[{label:"管理员",value:"super"},{label:"用户",value:"user"},{label:"测试",value:"test"}],r=d(()=>[{fieldName:"realName",component:"Input",label:"姓名"},{fieldName:"username",component:"Input",label:"用户名"},{fieldName:"roles",component:"Select",componentProps:{mode:"tags",options:t},label:"角色"},{fieldName:"introduction",component:"Textarea",label:"个人简介"}]);return k(()=>c(null,null,function*(){const o=yield F();s.value.getFormApi().setValues(o)})),(o,l)=>(_(),C(u(V),{ref_key:"profileBaseSettingRef",ref:s,"form-schema":r.value},null,8,["form-schema"]))}});export{E as _};
